<!doctype html><html><head><title>材质编译</title><base href="../../../../"><meta id="root-path" root-path="../../../../"><link rel="icon" sizes="96x96" href="https://publish-01.obsidian.md/access/f786db9fac45774fa4f0d8112e232d67/favicon-96x96.png"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes,minimum-scale=1,maximum-scale=5"><meta charset="UTF-8"><link rel="stylesheet" href="lib/styles/obsidian-styles.css"><link rel="stylesheet" href="lib/styles/theme.css"><link rel="stylesheet" href="lib/styles/plugin-styles.css"><link rel="stylesheet" href="lib/styles/snippets.css"><link rel="stylesheet" href="lib/styles/generated-styles.css"><style></style><script type="module" src="lib/scripts/graph_view.js"></script><script src="lib/scripts/graph_wasm.js"></script><script src="lib/scripts/tinycolor.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.2.4/pixi.min.js" integrity="sha512-Ch/O6kL8BqUwAfCF7Ie5SX1Hin+BJgYH4pNjRqXdTEqMsis1TUYg+j6nnI9uduPjGaj7DN4UKCZgpvoExt6dkw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><script>let webpageContainer,documentContainer,viewContent,leftSidebar,rightSidebar,sidebarCollapseIcons,sidebarGutters,sidebars,sidebarTargetWidth,contentTargetWidth,canvasWrapper,canvas,canvasNodes,canvasBackground,canvasBackgroundPattern,focusedCanvasNode,loadingIcon,documentType,embedType,customType,deviceSize,lastScreenWidth,isOffline=!1,collapseIconUp=["m7 15 5 5 5-5","m7 9 5-5 5 5"],collapseIconDown=["m7 20 5-5 5 5","m7 4 5 5 5-5"],isTouchDevice=isTouchCapable(),fullyInitialized=!1;function initGlobalObjects(){loadingIcon=document.createElement("div"),loadingIcon.classList.add("loading-icon"),document.body.appendChild(loadingIcon),loadingIcon.innerHTML="<div></div><div></div><div></div><div></div>",webpageContainer=document.querySelector(".webpage-container"),documentContainer=document.querySelector(".document-container"),leftSidebar=document.querySelector(".sidebar-left"),rightSidebar=document.querySelector(".sidebar-right"),sidebarCollapseIcons=Array.from(document.querySelectorAll(".sidebar-collapse-icon")),sidebarGutters=[sidebarCollapseIcons[0].parentElement,sidebarCollapseIcons[1].parentElement],sidebars=[sidebarGutters[0].parentElement,sidebarGutters[1].parentElement]}async function initializePage(){focusedCanvasNode=null,canvasWrapper=document.querySelector(".canvas-wrapper")??canvasWrapper,canvas=document.querySelector(".canvas")??canvas;let e=document.querySelectorAll(".canvas-node");canvasNodes=e.length>0?e:canvasNodes,canvasBackground=document.querySelector(".canvas-background")??canvasBackground,canvasBackgroundPattern=document.querySelector(".canvas-background pattern")??canvasBackgroundPattern,viewContent=document.querySelector(".document-container > .view-content")??document.querySelector(".document-container > .markdown-preview-view")??viewContent,fullyInitialized||(initGlobalObjects(),initializeDocumentTypes(),setupSidebars(),setupThemeToggle(),sidebarTargetWidth=await getComputedPixelValue("--sidebar-width"),contentTargetWidth=.9*await getComputedPixelValue("--line-width"),window.addEventListener("resize",(()=>onResize())),onResize(),document.body.classList.toggle("post-load",!0),document.body.classList.toggle("loading",!1),setTimeout((function(){document.body.classList.toggle("loaded",!0),document.body.classList.toggle("post-load",!1)}),2e3),fullyInitialized=!0),"video"==embedType||"embed"==embedType||"excalidraw"==customType||"kanban"==customType||"canvas"==documentType?rightSidebar.collapsed||rightSidebar.temporaryCollapse():rightSidebar.temporarilyCollapsed&&rightSidebar.collapsed&&(rightSidebar.collapse(!1),rightSidebar.temporarilyCollapsed=!1)}function initializePageEvents(e){setupHeaders(e),setupTrees(e),setupCallouts(e),setupCheckboxes(e),setupCanvas(e),setupCodeblocks(e),setupLinks(e),setupScroll(e)}function initializeDocumentTypes(){document.querySelector(".document-container > .markdown-preview-view")?documentType="markdown":document.querySelector(".canvas-wrapper")?documentType="canvas":(documentType="custom",document.querySelector(".kanban-plugin")?customType="kanban":document.querySelector(".excalidraw-plugin")&&(customType="excalidraw"))}function initializeForFileProtocol(){let e=document.querySelector(".graph-view-placeholder");e&&(console.log("Running locally, skipping graph view initialization and hiding graph."),e.style.display="none",e.previousElementSibling.style.display="none")}function onOffline(e){e.preventDefault(),e.stopPropagation(),console.log("Offline"),isOffline=!0}function onEndResize(){document.body.classList.toggle("resizing",!1)}function onStartResize(){document.body.classList.toggle("resizing",!0)}window.onload=async function(){"file:"==window.location.protocol&&initializeForFileProtocol(),await initializePage(),initializePageEvents(document)},window.addEventListener("offline",onOffline),window.onpopstate=function(e){if(e.preventDefault(),e.stopPropagation(),document.body.classList.contains("floating-sidebars")&&(!leftSidebar.collapsed||!rightSidebar.collapsed))return leftSidebar.collapse(!0),void rightSidebar.collapse(!0);loadDocument(getURLPath(),!1)};let checkStillResizingTimeout,isResizing=!1;function onResize(e=!1){function t(e,t){let o=window.innerWidth;return o>e&&o<t&&null==lastScreenWidth||o>e&&o<t&&(lastScreenWidth<=e||lastScreenWidth>=t)}isResizing||(onStartResize(),isResizing=!0),function(e){let t=window.innerWidth;return t>e&&null==lastScreenWidth||t>e&&lastScreenWidth<e}(contentTargetWidth+2*sidebarTargetWidth)?(deviceSize="large-screen",document.body.classList.toggle("floating-sidebars",!1),document.body.classList.toggle("is-large-screen",!0),document.body.classList.toggle("is-small-screen",!1),document.body.classList.toggle("is-tablet",!1),document.body.classList.toggle("is-phone",!1),sidebars.forEach((function(e){e.collapse(!1)})),document.body.classList.contains("sidebars-always-collapsible")?sidebarGutters.forEach((function(e){e.collapse(!1)})):sidebarGutters.forEach((function(e){e.collapse(!0)}))):t(contentTargetWidth+sidebarTargetWidth,contentTargetWidth+2*sidebarTargetWidth)?(deviceSize="small screen",document.body.classList.toggle("floating-sidebars",!1),document.body.classList.toggle("is-large-screen",!1),document.body.classList.toggle("is-small-screen",!0),document.body.classList.toggle("is-tablet",!1),document.body.classList.toggle("is-phone",!1),sidebarGutters.forEach((function(e){e.collapse(!1)})),leftSidebar.collapsed||rightSidebar.collapse(!0)):t(1.5*sidebarTargetWidth,contentTargetWidth+sidebarTargetWidth)?(deviceSize="tablet",document.body.classList.toggle("floating-sidebars",!0),document.body.classList.toggle("is-large-screen",!1),document.body.classList.toggle("is-small-screen",!1),document.body.classList.toggle("is-tablet",!0),document.body.classList.toggle("is-phone",!1),sidebarGutters.forEach((function(e){e.collapse(!1)})),leftSidebar.collapsed||rightSidebar.collapse(!0),fullyInitialized||leftSidebar.collapse(!0)):function(e){let t=window.innerWidth;return t<e&&null==lastScreenWidth||t<e&&lastScreenWidth>e}(1.5*sidebarTargetWidth)&&(deviceSize="phone",document.body.classList.toggle("floating-sidebars",!0),document.body.classList.toggle("is-large-screen",!1),document.body.classList.toggle("is-small-screen",!1),document.body.classList.toggle("is-tablet",!1),document.body.classList.toggle("is-phone",!0),sidebars.forEach((function(e){e.collapse(!0)})),sidebarGutters.forEach((function(e){e.collapse(!1)}))),lastScreenWidth=window.innerWidth,null!=checkStillResizingTimeout&&clearTimeout(checkStillResizingTimeout);let o=window.innerWidth;checkStillResizingTimeout=setTimeout((function(){window.innerWidth==o&&(checkStillResizingTimeout=void 0,isResizing=!1,onEndResize())}),200)}function clamp(e,t,o){return Math.min(Math.max(e,t),o)}function getElBounds(e){let t=e.getBoundingClientRect(),o=t.x,n=t.y,i=t.width,s=t.height;return{x:o,y:n,width:i,height:s,minX:o,minY:n,maxX:o+i,maxY:n+s,centerX:t.x+t.width/2,centerY:t.y+t.height/2}}async function getComputedPixelValue(e){const t=document.createElement("div");document.body.appendChild(t),t.style.position="absolute",t.style.width=`var(${e})`,await new Promise((e=>setTimeout(e,10)));const o=window.getComputedStyle(t).width;return t.remove(),parseFloat(o)}function getPointerPosition(e){let t=e.touches?Array.from(e.touches):[];return{x:t.length>0?t.reduce(((e,t)=>e+t.clientX),0)/e.touches.length:e.clientX,y:t.length>0?t.reduce(((e,t)=>e+t.clientY),0)/e.touches.length:e.clientY}}function getTouchPosition(e){return{x:e.clientX,y:e.clientY}}function getAllChildrenRecursive(e){let t=[];for(let o=0;o<e.children.length;o++){const n=e.children[o];t.push(n),t=t.concat(getAllChildrenRecursive(n))}return t}function isMobile(){let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e}function isTouchCapable(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function downloadBlob(e,t="file.txt"){if(window.navigator&&window.navigator.msSaveOrOpenBlob)return window.navigator.msSaveOrOpenBlob(e);const o=window.URL.createObjectURL(e),n=document.createElement("a");n.href=o,n.download=t,n.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout((()=>{window.URL.revokeObjectURL(o),n.remove()}),100)}function extentionToTag(e){return["png","jpg","jpeg","svg","gif","bmp","ico"].includes(e)?"img":["mp4","mov","avi","webm","mpeg"].includes(e)?"video":["mp3","wav","ogg","aac"].includes(e)?"audio":["pdf"].includes(e)?"embed":void 0}let slideUp=(e,t=500)=>{e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.boxSizing="border-box",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((async()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}),t)},slideUpAll=(e,t=500)=>{e.forEach((async e=>{e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.boxSizing="border-box",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0})),window.setTimeout((async()=>{e.forEach((async e=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}))}),t)},slideDown=(e,t=500)=>{e.style.removeProperty("display");let o=window.getComputedStyle(e).display;"none"===o&&(o="block"),e.style.display=o;let n=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.boxSizing="border-box",e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=n+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((async()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}),t)},slideDownAll=(e,t=500)=>{e.forEach((async e=>{e.style.removeProperty("display");let o=window.getComputedStyle(e).display;"none"===o&&(o="block"),e.style.display=o;let n=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.boxSizing="border-box",e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=n+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom")})),window.setTimeout((async()=>{e.forEach((async e=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}))}),t)};var slideToggle=(e,t=500)=>"none"===window.getComputedStyle(e).display?slideDown(e,t):slideUp(e,t),slideToggleAll=(e,t=500)=>"none"===window.getComputedStyle(e[0]).display?slideDownAll(e,t):slideUpAll(e,t);let transferDocument=document.implementation.createHTMLDocument();async function loadDocument(e,t=!0,o=!0){let n=e.split("#"),i=n[0]??e;console.log("Loading document: "+i),loadingIcon.classList.toggle("shown",!0);let s,a=getViewBounds();if(loadingIcon.style.left=a.centerX-loadingIcon.offsetWidth/2+"px",loadingIcon.style.top=a.centerY-loadingIcon.offsetHeight/2+"px",documentContainer.classList.toggle("hide",!0),documentContainer.classList.toggle("show",!1),"phone"==deviceSize&&leftSidebar.collapse(!0),!isOffline){try{s=await fetch(i)}catch(e){return console.log("Cannot use fetch API (likely due to CORS), just loading the page normally."),void window.location.assign(i)}if(s.ok){setActiveDocument(i,o,t);let a=e.split(".").pop().split("?")[0].split("#")[0].toLowerCase().trim();if(documentType="none",embedType="none",customType="none","html"==a){let e=(await s.text()).replaceAll("<!DOCTYPE html>","").replaceAll("<html>","").replaceAll("</html>","");transferDocument.write(e);let t=document.importNode(transferDocument.querySelector(".document-container"),!0);documentContainer.remove(),documentContainer=t,webpageContainer.insertBefore(documentContainer,webpageContainer.children[1]),document.querySelector(".outline-tree").innerHTML=transferDocument.querySelector(".outline-tree").innerHTML;let o=n.length>1?n[1]:null;o&&document.getElementById(o).scrollIntoView(),setupRootPath(transferDocument),initializeDocumentTypes(),setTimeout((function(){initializePageEvents(documentContainer),initializePageEvents(document.querySelector(".outline-tree"))}),0),document.title=transferDocument.title,transferDocument.close()}else if(documentType="embed",embedType=extentionToTag(a),null!=embedType){let t=document.createElement(embedType);t.controls=!0,t.src=e,t.style.maxWidth="100%","embed"==embedType&&(t.style.width="100%",t.style.height="100%"),t.style.objectFit="contain",viewContent.innerHTML="",viewContent.setAttribute("class","view-content embed"),viewContent.appendChild(t),document.querySelector(".outline-tree").innerHTML="",document.title=e.split("/").pop()}else downloadBlob(await s.blob(),e.split("/").pop());await initializePage()}else setTimeout((function(){viewContent.innerHTML="\n\t\t\t<div>\n\t\t\t\t<center style='position: relative; transform: translateY(20vh); width: 100%; text-align: center;'>\n\t\t\t\t\t<h1 style>Page Not Found</h1>\n\t\t\t\t</center>\n\t\t\t</div>\n\t\t\t",document.querySelector(".outline-tree").innerHTML="",console.log("Page not found: "+getAbsoluteRootPath()+e);let t=getURLRootPath(getAbsoluteRootPath()+e);rootPath=t,document.querySelector("base").href=t,document.title="Page Not Found"}),1e3);return loadingIcon.classList.toggle("shown",!1),documentContainer.style.transitionDuration="",documentContainer.classList.toggle("hide",!1),documentContainer.classList.toggle("show",!0),transferDocument}setTimeout((function(){viewContent.innerHTML="\n<center style='position: relative; transform: translateY(20vh); width: 100%; text-align: center;'>\n\t<h1>You appear to be offline. Check your internet connection and then try reloading the page.</h1>\n</center>",document.querySelector(".outline-tree").innerHTML="",console.log("Page offline: "+getAbsoluteRootPath()+e);let t=getURLRootPath(getAbsoluteRootPath()+e);rootPath=t,document.querySelector("base").href=t,document.title="Page Offline",documentContainer.classList.toggle("hide",!1),documentContainer.classList.toggle("show",!0),loadingIcon.classList.toggle("shown",!1)}),1e3)}function setActiveDocument(e,t=!0,o=!0){let n=e.split("#")[0]??e;document.querySelector(".tree-item.mod-active")?.classList.remove("mod-active");let i,s=Array.from(document.querySelectorAll(".tree-item > .tree-item-contents > .tree-item-link"));for(let t of s)if(t.getAttribute("href")==decodeURI(e)){let e=t.parentElement.parentElement;for(e.classList.add("mod-active"),i=e;e.hasAttribute("data-depth");)setTreeCollapsed(e,!1,!1),e=e.parentElement.parentElement;break}if(t&&i?.scrollIntoView({block:"center",inline:"nearest"}),"undefined"!=typeof nodes&&window.renderWorker){let e=nodes?.paths.findIndex((function(e){return e.endsWith(n)}))??-1;e>=0&&(window.renderWorker.activeNode=e)}o&&"file:"!=window.location.protocol&&window.history.pushState({path:n},"",n)}function setupRootPath(e){let t=e.querySelector("#root-path").getAttribute("root-path");document.querySelector("base").href=t,document.querySelector("#root-path").setAttribute("root-path",t),rootPath=t}function getAbsoluteRootPath(){return"undefined"==typeof rootPath&&setupRootPath(document),new URL(window.location.href+"/../"+rootPath).pathname}function getURLPath(e=window.location.pathname){let t=getAbsoluteRootPath();return e.substring(t.length)}function getURLRootPath(e=window.location.pathname){let t=getURLPath(e).split("/"),o="";for(let e=0;e<t.length-1;e++)o+="../";return o}function setupHeaders(e){e.querySelectorAll(".heading-collapse-indicator").forEach((function(e){e.addEventListener("click",(function(){toggleTreeHeaderOpen(e.parentElement.parentElement,!0)}))})),e.querySelectorAll(".heading-wrapper").forEach((function(e){e.collapsed=!1,e.childrenContainer=e.querySelector(".heading-children"),e.parentHeader=e.parentElement.parentElement,e.headerElement=e.querySelector(".heading"),e.markdownPreviewSizer=getHeaderSizerEl(e),e.collapse=function(t,o=!0,n=!1){collapseHeader(e,t,o,n)},e.toggleCollapse=function(t=!0){toggleTreeHeaderOpen(e,t)},e.hide=function(){hideHeader(e)},e.show=function(t=!1,o=!1,n=!1){showHeader(e,t,o,n)}})),e.querySelectorAll(".heading").forEach((function(e){e.headingWrapper=e.parentElement}))}function isHeadingWrapper(e){return!!e&&e.classList.contains("heading-wrapper")}function getHeaderSizerEl(e){let t=e;for(;t&&!t.classList.contains("markdown-preview-sizer");)t=t.parentElement;return t||void 0}async function collapseHeader(e,t,o=!0,n=!1){let i=e.childrenContainer;if(o&&!t){let t=e.parentHeader;isHeadingWrapper(t)&&t.collapse(!1,!0,n)}if(e.classList.contains("is-collapsed")==t)return void(t||"canvas"!=documentType||e.show(!0));if(e.timeout&&(clearTimeout(e.timeout),i.style.transitionDuration="",i.style.height="",e.classList.toggle("is-animating",!1)),t){e.collapseHeight=i.offsetHeight+parseFloat(i.lastChild?.marginBottom||0);let t=e.nextElementSibling;for(;t&&"canvas"==documentType;){let e=t;isHeadingWrapper(e)&&e.show(!1,!0,!0),setTimeout((function(){e.forceShown=!1}),500),t=t.nextElementSibling}}let s=e.collapseHeight;if(i.style.height=s+"px",t||"canvas"!=documentType||e.show(!0),e.collapsed=t,n){console.log("instant"),i.style.transitionDuration="0s",e.classList.toggle("is-collapsed",t),i.style.height="",i.style.transitionDuration="";let o=Array.from(e.markdownPreviewSizer.children).reduce(((e,t)=>e+t.offsetHeight),0);return void(e.markdownPreviewSizer.style.minHeight=o+"px")}let a=getComputedStyle(i).transitionDuration;a=a.endsWith("s")?parseFloat(a):a.endsWith("ms")?parseFloat(a)/1e3:0;let l=Math.min(a*Math.sqrt(s)/16,.5);i.style.transitionDuration=`${l}s`,i.style.height=t?"0px":s+"px",e.classList.toggle("is-animating",!0),e.classList.toggle("is-collapsed",t),setTimeout((function(){i.style.transitionDuration="",t||(i.style.height=""),e.classList.toggle("is-animating",!1);let o=Array.from(e.markdownPreviewSizer.children).reduce(((e,t)=>e+t.offsetHeight),0);e.markdownPreviewSizer.style.minHeight=o+"px"}),1e3*l)}function toggleTreeHeaderOpen(e,t=!0){e.collapse(!e.collapsed,t)}function hideHeader(e){if(e.forceShown)return;if(e.classList.contains("is-hidden")||e.classList.contains("is-collapsed"))return;if("none"==getComputedStyle(e).display)return;let t=e.offsetHeight;e.classList.toggle("is-hidden",!0),0!=t&&(e.style.height=t+"px"),e.style.visibility="hidden"}function showHeader(e,t=!0,o=!1,n=!1){if(n&&(e.forceShown=!0),t){let t=e.parentHeader;isHeadingWrapper(t)&&t.show(!0,!1,n)}o&&e.querySelectorAll(".heading-wrapper").forEach((function(e){e.show(!1,!0,n)})),e.classList.contains("is-hidden")&&!e.classList.contains("is-collapsed")&&(e.classList.toggle("is-hidden",!1),e.style.height="",e.style.visibility="")}function setupTrees(e){const t=Array.from(e.querySelectorAll(".tree-container.file-tree .tree-item")),o=Array.from(e.querySelectorAll(".tree-container.outline-tree .tree-item"));e.querySelectorAll(".tree-item-link > .collapse-icon").forEach((function(e){e.addEventListener("click",(function(t){return t.preventDefault(),t.stopPropagation(),toggleTreeCollapsed(e.parentElement.parentElement.parentElement),!1}))})),e.querySelectorAll(".collapse-tree-button").forEach((function(e){e.treeRoot=e.parentElement.parentElement,e.icon=e.firstChild,e.icon.innerHTML="<path d></path><path d></path>";let n=e.treeRoot.classList.contains("file-tree")?t:o;e.setIcon=function(t){e.icon.children[0].setAttribute("d",t?collapseIconUp[0]:collapseIconDown[0]),e.icon.children[1].setAttribute("d",t?collapseIconUp[1]:collapseIconDown[1])},e.collapse=function(t){setTreeCollapsedAll(n,t),e.setIcon(t),e.collapsed=t},e.toggleCollapse=function(){e.collapse(!e.collapsed)},e.collapsed=0!=e.treeRoot.querySelectorAll(".tree-scroll-area + .tree-item.mod-collapsible.is-collapsed"),e.setIcon(e.collapsed),e.addEventListener("click",(function(t){return t.preventDefault(),t.stopPropagation(),e.toggleCollapse(),!1}))})),t.forEach((function(e){let t=e.querySelector(".tree-item-link");if(e.querySelector(".collapse-icon"))t?.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();let t=this.parentElement?.parentElement;t&&toggleTreeCollapsed(t)}));else{let o=t.getAttribute("href").split(".").pop();if(!o.includes(" ")&&"html"!=o){let t=document.createElement("div");t.classList.add("nav-file-tag"),t.textContent=o.toUpperCase(),e.querySelector(".tree-item-contents").appendChild(t)}}}))}async function setTreeCollapsed(e,t,o=!0){if(!e||!e.classList.contains("mod-collapsible"))return;let n=e.querySelector(".tree-item-children");t?(e.classList.add("is-collapsed"),o?slideUp(n,100):n.style.display="none"):(e.classList.remove("is-collapsed"),o?slideDown(n,100):n.style.removeProperty("display"))}async function setTreeCollapsedAll(e,t,o=!0){let n=[];e.forEach((async e=>{if(!e||!e.classList.contains("mod-collapsible"))return;let o=e.querySelector(".tree-item-children");t?e.classList.add("is-collapsed"):e.classList.remove("is-collapsed"),n.push(o)})),t?o?slideUpAll(n,100):n.forEach((async e=>e.style.display="none")):o?slideDownAll(n,100):n.forEach((async e=>e.style.removeProperty("display")))}function toggleTreeCollapsed(e){e&&setTreeCollapsed(e,!e.classList.contains("is-collapsed"))}function toggleTreeCollapsedAll(e){e&&setTreeCollapsedAll(e,!e[0].classList.contains("is-collapsed"))}function setupCanvas(e){if("canvas"!=documentType||!e.querySelector(".canvas-wrapper"))return;e.querySelector(".canvas")?.setAttribute("style","translate: 0px 1px; scale: 1;");let t=getNodesBounds();function o(e){let t=e.touches??[];if(!(t.length>1)&&(1==e.button||0==e.button||t.length>0)){let o=getPointerPosition(e),n=!1,i=0,s=t.length,a=function(t){let a=t.touches??[],l=getPointerPosition(t);s!=a.length&&(o=l,s=a.length);let r=l.x-o.x,c=l.y-o.y,d=!1;if((1==e.button||1==a.length)&&focusedCanvasNode){let e=Math.abs(r)>Math.abs(1.5*c),t=Math.abs(c)>Math.abs(1.5*r),o=focusedCanvasNode.querySelector(".markdown-preview-sizer");if(o){let n=o.scrollHeight>o.parentElement.clientHeight+1,i=o.scrollWidth>o.parentElement.clientWidth+1;(e&&i||t&&n)&&(d=!0)}}if(d||(translateCanvas(r,c),o=l),2==a.length){let e=getPointerPosition(t,!1),o=getTouchPosition(t.touches[0]),s=getTouchPosition(t.touches[1]),a=Math.sqrt(Math.pow(o.x-s.x,2)+Math.pow(o.y-s.y,2));n||(n=!0,i=a),scaleCanvasAroundPoint(1+(a-i)/i,e.x,e.y),i=a}},l=function(e){document.body.removeEventListener("mousemove",a),document.body.removeEventListener("mouseup",l),document.body.removeEventListener("mouseenter",r),document.body.removeEventListener("touchmove",a),document.body.removeEventListener("touchend",l),document.body.removeEventListener("touchcancel",l)},r=function(e){1!=e.buttons&&4!=e.buttons&&l(e)};document.body.addEventListener("mousemove",a),document.body.addEventListener("mouseup",l),document.body.addEventListener("mouseenter",r),document.body.addEventListener("touchmove",a),document.body.addEventListener("touchend",l),document.body.addEventListener("touchcancel",l)}}setViewCenter(t.centerX,t.centerY),e.querySelectorAll(".canvas-node-container").forEach((function(e){var t=e.parentElement;function o(e){t.classList.toggle("is-focused"),null!=focusedCanvasNode&&focusedCanvasNode!=t&&(focusedCanvasNode.classList.remove("is-focused"),focusedCanvasNode.querySelector(".canvas-node-container").style.display=""),focusedCanvasNode=t,t.addEventListener("mouseleave",n),t.addEventListener("touchend",n)}function n(e){focusedCanvasNode&&(focusedCanvasNode.classList.remove("is-focused"),focusedCanvasNode=null),t.removeEventListener("mouseleave",n),t.removeEventListener("touchend",n)}e.addEventListener("mouseenter",o),e.addEventListener("touchstart",o)})),e.querySelectorAll(".canvas-node").forEach((function(e){e.addEventListener("dblclick",(function(t){fitViewToNode(e)}))})),e.querySelectorAll(".canvas-background").forEach((function(e){e.addEventListener("dblclick",(function(e){fitViewToCanvas()}))})),canvasWrapper.addEventListener("mousedown",o),canvasWrapper.addEventListener("touchstart",o);let n=0,i=0;canvasWrapper.addEventListener("mousemove",(function(e){let t=getPointerPosition(e);n=t.x,i=t.y}));let s=1,a=0,l=!1;canvasWrapper.addEventListener("wheel",(function(e){if(focusedCanvasNode){let e=focusedCanvasNode.querySelector(".markdown-preview-sizer");if(e&&e.scrollHeight>e.parentElement.clientHeight)return}if(e.preventDefault(),e.stopPropagation(),l){let t=1;t-=e.deltaY/700*t,t=clamp(t,.1,10);let o=getViewBounds();scaleCanvasAroundPoint(t,o.centerX,o.centerY)}else{let t=0==a;a-=e.deltaY/200;const o=.14*s;a=clamp(a,-o,o),t&&requestAnimationFrame(u)}}));let r=0,c=0,d=0;function u(e){if(r=e-c,0==c&&(r=30),c=e,d=.05*r+.95*d,d>50)return console.log("Scrolling too slow, turning on instant scroll"),void(l=!0);let t=s;s+=a*(r/1e3)*30,s=clamp(s,.1,10),getViewBounds(),scaleCanvasAroundPoint(s/t,n,i),a*=.4,Math.abs(a)<.01?(a=0,c=0):requestAnimationFrame(u)}fitViewToCanvas()}function getViewBounds(){let e=viewContent.getBoundingClientRect(),t=e.x,o=e.y,n=e.x+e.width,i=e.y+e.height;return{x:t,y:o,width:n-t,height:i-o,minX:t,minY:o,maxX:n,maxY:i,centerX:e.x+e.width/2,centerY:e.y+e.height/2}}function getNodesBounds(){let e=1/0,t=1/0,o=-1/0,n=-1/0;canvasNodes.forEach((function(i){let s=i.getBoundingClientRect();s.x<e&&(e=s.x),s.y<t&&(t=s.y),s.x+s.width>o&&(o=s.x+s.width),s.y+s.height>n&&(n=s.y+s.height)}));let i=o-e,s=n-t;return{x:e,y:t,width:i,height:s,minX:e,minY:t,maxX:o,maxY:n,centerX:e+i/2,centerY:t+s/2}}function getCanvasBounds(){let e=canvas.getBoundingClientRect(),t=e.x,o=e.y,n=e.width,i=e.height;return{x:t,y:o,width:n,height:i,minX:t,minY:o,maxX:t+n,maxY:o+i,centerX:e.x+e.width/2,centerY:e.y+e.height/2}}function scaleCanvasAroundPoint(e,t,o){let n=getCanvasBounds(),i=t-n.x,s=o-n.y,a=t-(n.x+i*e),l=o-(n.y+s*e);return scaleCanvas(e),translateCanvas(a,l),{x:a,y:l}}function scaleCanvas(e){let t=Math.max(e*canvas.style.scale,.001);canvas.style.scale=t,canvasWrapper.style.setProperty("--zoom-multiplier",1/Math.sqrt(t))}function translateCanvas(e,t){let o=canvas.style.translate,n=o.split(" "),i=n.length>0?parseFloat(o.split(" ")[0].trim()):0,s=n.length>1?parseFloat(o.split(" ")[1].trim()):i;canvas.style.translate=`${i+e}px ${s+t}px`}function setViewCenter(e,t){let o=getViewBounds();translateCanvas(o.centerX-e,o.centerY-t)}function getCanvasTranslation(){let e=canvas.style.translate,t=e.split(" "),o=t.length>0?parseFloat(e.split(" ")[0].trim()):0;return{x:o,y:t.length>1?parseFloat(e.split(" ")[1].trim()):o}}function scaleCanvasBackground(e){let t=e*canvasBackgroundPattern.getAttribute("width"),o=e*canvasBackgroundPattern.getAttribute("height");canvasBackgroundPattern.setAttribute("width",t),canvasBackgroundPattern.setAttribute("height",o)}function translateCanvasBackground(e,t){canvasBackgroundPattern.setAttribute("x",e+canvasBackgroundPattern.getAttribute("x")),canvasBackgroundPattern.setAttribute("y",t+canvasBackgroundPattern.getAttribute("y"))}function fitViewToNode(e){let t=getElBounds(e),o=getViewBounds(),n=getCanvasBounds(),i=.8*Math.min(o.width/t.width,o.height/t.height),s=n.x,a=n.y,l=s+(t.centerX-s)*i,r=a+(t.centerY-a)*i,c=o.centerX-l,d=o.centerY-r;t=getElBounds(e),canvas.style.transition="scale 0.5s cubic-bezier(0.5, -0.1, 0.5, 1.1), translate 0.5s cubic-bezier(0.5, -0.1, 0.5, 1.1)",scaleCanvas(i),translateCanvas(c,d),setTimeout((function(){canvas.style.transition=""}),550)}function fitViewToCanvas(){let e=getNodesBounds(),t=getViewBounds(),o=getCanvasBounds(),n=.8*Math.min(t.width/e.width,t.height/e.height),i=o.x,s=o.y,a=i+(e.centerX-i)*n,l=s+(e.centerY-s)*n,r=t.centerX-a,c=t.centerY-l;canvas.style.transition="scale 0.5s cubic-bezier(0.5, -0.1, 0.5, 1.1), translate 0.5s cubic-bezier(0.5, -0.1, 0.5, 1.1)",scaleCanvas(n),translateCanvas(r,c),setTimeout((function(){canvas.style.transition=""}),550)}function setupCallouts(e){e.querySelectorAll(".callout.is-collapsible .callout-title").forEach((function(e){e.addEventListener("click",(function(){var t=this.parentElement;t.classList.toggle("is-collapsed"),e.querySelector(".callout-fold").classList.toggle("is-collapsed"),slideToggle(t.querySelector(".callout-content"),100)}))}))}function setupCheckboxes(e){e.querySelectorAll(".task-list-item-checkbox").forEach((function(e){e.addEventListener("click",(function(){var e=this.parentElement;e.classList.toggle("is-checked"),e.setAttribute("data-task",e.classList.contains("is-checked")?"x":" ")}))})),e.querySelectorAll('.plugin-tasks-list-item input[type="checkbox"]').forEach((function(e){e.checked=e.parentElement.classList.contains("is-checked")})),e.querySelectorAll(".kanban-plugin__item.is-complete").forEach((function(e){e.querySelector('input[type="checkbox"]').checked=!0}))}function setupCodeblocks(e){e.querySelectorAll(".copy-code-button").forEach((function(t){t.addEventListener("click",(function(){var t=this.parentElement.querySelector("code").textContent;navigator.clipboard.writeText(t),this.textContent="Copied!",setTimeout((function(){e.querySelectorAll(".copy-code-button").forEach((function(e){e.textContent="Copy"}))}),2e3)}))}))}function setupLinks(e){e.querySelectorAll(".internal-link, .footnote-link, .tree-item:not(.mod-tree-folder) > .tree-item-contents > .tree-item-link").forEach((function(e){e.addEventListener("click",(function(t){let o=e.getAttribute("href");if(t.preventDefault(),o)if(o.startsWith("#")){let e=document.getElementById(o.substring(1));e?(e.headingWrapper?.collapse(!1,!0,!0),setTimeout((function(){e.classList.contains(".heading")?e.headingWrapper?.scrollIntoView({behavior:"smooth",block:"start"}):e.scrollIntoView({behavior:"smooth",block:"start"}),"phone"==deviceSize&&rightSidebar.collapse(!0)}),0)):console.log("No element found with id: "+o.substring(1))}else loadDocument(o,!0,!e.classList.contains("tree-item-link"))}))}))}function setupSidebars(){sidebarCollapseIcons[0].otherIcon=sidebarCollapseIcons[1],sidebarCollapseIcons[1].otherIcon=sidebarCollapseIcons[0],sidebarCollapseIcons[0].gutter=sidebarGutters[0],sidebarCollapseIcons[1].gutter=sidebarGutters[1],sidebarCollapseIcons[0].sidebar=sidebars[0],sidebarCollapseIcons[1].sidebar=sidebars[1],sidebarGutters[0].otherGutter=sidebarGutters[1],sidebarGutters[1].otherGutter=sidebarGutters[0],sidebarGutters[0].collapseIcon=sidebarCollapseIcons[0],sidebarGutters[1].collapseIcon=sidebarCollapseIcons[1],sidebars[0].otherSidebar=sidebars[1],sidebars[1].otherSidebar=sidebars[0],sidebars[0].gutter=sidebarGutters[0],sidebars[1].gutter=sidebarGutters[1],sidebars.forEach((function(e){e.collapsed=e.classList.contains("is-collapsed"),e.collapse=function(t=!0){!t&&this.temporarilyCollapsed&&"large-screen"==deviceSize&&this.gutter.collapse(!0),!t&&document.body.classList.contains("floating-sidebars")&&document.body.addEventListener("click",(function t(o){e.collapse(!0),document.body.removeEventListener("click",t)})),"phone"==deviceSize&&(t||e.otherSidebar.fullCollapse(!0,!0),t&&e.gutter.otherGutter.collapse(!1,!0)),"tablet"==deviceSize&&(t||e.otherSidebar.collapse(!0)),this.classList.toggle("is-collapsed",t),this.collapsed=t},e.temporaryCollapse=function(e=!0){this.temporarilyCollapsed=!0,this.collapse(!0),this.gutter.collapse(!1),this.collapsed=e},e.fullCollapse=function(e=!0,t=!1){this.collapse(e),this.gutter.collapse(!0,t),this.collapsed=e},e.toggleCollapse=function(){this.collapse(!this.collapsed)},e.toggleFullCollapse=function(){this.fullCollapse(!this.collapsed)}})),sidebarGutters.forEach((function(e){e.collapsed=e.classList.contains("is-collapsed"),e.collapse=function(e,t=!1){!t&&document.body.classList.contains("sidebars-always-collapsible")||(this.classList.toggle("is-collapsed",e),this.collapsed=e)},e.toggleCollapse=function(){this.collapse(!this.collapsed)}})),sidebarCollapseIcons.forEach((function(e){e.addEventListener("click",(function(t){t.stopPropagation(),e.sidebar.toggleCollapse()}))})),document.querySelectorAll(".sidebar-container").forEach((function(e){e.addEventListener("click",(function(e){e.stopPropagation()}))}))}function getSidebarWidthProp(){return getComputedPixelValue("--sidebar-width")}function setupThemeToggle(){function e(e,t=!1){let o=document.querySelector(".theme-toggle-input");if(o.checked=e,t){var n=document.body.style.transition;document.body.style.transition="none"}!o.classList.contains("is-checked")&&e?o.classList.add("is-checked"):o.classList.contains("is-checked")&&!e&&o.classList.remove("is-checked"),e?(document.body.classList.contains("theme-dark")&&document.body.classList.remove("theme-dark"),document.body.classList.contains("theme-light")||document.body.classList.add("theme-light")):(document.body.classList.contains("theme-light")&&document.body.classList.remove("theme-light"),document.body.classList.contains("theme-dark")||document.body.classList.add("theme-dark")),t&&setTimeout((function(){document.body.style.transition=n}),100),localStorage.setItem("theme_toggle",e?"true":"false")}null!=localStorage.getItem("theme_toggle")&&e("true"==localStorage.getItem("theme_toggle")),document.body.classList.contains("theme-light")?e(!0):e(!1),document.querySelector(".theme-toggle-input")?.addEventListener("change",(t=>{console.log("Theme toggle changed to: "+!("true"==localStorage.getItem("theme_toggle"))),e(!("true"==localStorage.getItem("theme_toggle")))}))}function setupScroll(e){if("canvas"!=documentType)return;let t=Array.from(e.querySelectorAll(".markdown-preview-view")),o=0,n=0;t.forEach((async function(e){console.log("Setting up markdown view");let t=Array.from(e.querySelectorAll(".heading-wrapper"));e.updateVisibleWindowMarkdown=function(o=!0,i=!0){let s=e.getBoundingClientRect();n=Math.min(.1*s.height,150);let a=s.top-n,l=s.bottom+n;async function r(e){let t=e?.getBoundingClientRect();if(!t)return;let n=t.top<a&&t.bottom<a||t.top>l&&t.bottom>l;n&&o?e.hide():!n&&i&&e.show()}for(let e=0;e<t.length;e++){let o=t[e];o&&r(o)}};let o=0;e.addEventListener("scroll",(function(){Math.abs(e.scrollTop-o)>n/3&&e.updateVisibleWindowMarkdown(!1,!0),o=e.scrollTop}))})),setInterval((async function(){t.length>0&&(t[o].updateVisibleWindowMarkdown(),o=(o+1)%t.length)}),200)}function setupExcalidraw(e){e.querySelectorAll(".excalidraw-svg svg").forEach((function(e){let t=e.querySelector("rect").getAttribute("fill")>"#7F7F7F";e.classList.add(t?"light":"dark")}))}</script><script>let nodes={paths:["编程/c++/访问类的私有成员和方法.html","编程/c++/c++.html","编程/编程.html","设计/动态设计/动态设计.html","设计/动态设计/seven课程笔记.html","设计/平面设计/复古与潮流的碰撞！绝区零设计元素&风格完全分析.html","设计/平面设计/平面设计.html","设计/设计.html","设计/replace_absolute_paths.html","深度学习/基础+gan/基础+gan.html","深度学习/基础+gan/截图笔记.html","深度学习/扩散模型/基础.html","深度学习/扩散模型/扩散模型.html","深度学习/扩散模型/实践之mesh-diffusion.html","深度学习/杂项理论/杂项理论.html","深度学习/杂项理论/重参数技巧.html","深度学习/深度学习.html","我的项目/我的项目.html","我的项目/portable-houdini.html","渲染相关/其他/色彩/色彩.html","渲染相关/其他/色彩/色彩空间、hdr和aces.html","渲染相关/其他/其他.html","渲染相关/其他/字体“大小”.html","渲染相关/图形api/opengl/opengl.html","渲染相关/图形api/opengl/opengl踩坑实录.html","渲染相关/图形api/vulkan/imgui文字渲染.html","渲染相关/图形api/vulkan/imgui中使用vulkan渲染窗口.html","渲染相关/图形api/vulkan/vulkan.html","渲染相关/图形api/vulkan/vulkan的setup.html","渲染相关/图形api/图形api.html","渲染相关/渲染相关.html","引擎/ue4/引擎源码/材质/材质.html","引擎/ue4/引擎源码/材质/材质编译.html","引擎/ue4/引擎源码/反射&序列化系统/反射&序列化系统.html","引擎/ue4/引擎源码/反射&序列化系统/枚举.html","引擎/ue4/引擎源码/引擎源码.html","引擎/ue4/blue-print/材质.html","引擎/ue4/blue-print/跨蓝图.html","引擎/ue4/blue-print/粒子.html","引擎/ue4/blue-print/时间和动画.html","引擎/ue4/blue-print/blue-print.html","引擎/ue4/blue-print/construct-script和event-graph.html","引擎/ue4/niagara/坑.html","引擎/ue4/niagara/其他.html","引擎/ue4/niagara/指令数优化.html","引擎/ue4/niagara/houdini-for-niagara.html","引擎/ue4/niagara/niagara.html","引擎/ue4/niagara/niagara-module.html","引擎/ue4/niagara/niagara-render.html","引擎/ue4/niagara/niagara-ribbon.html","引擎/ue4/niagara/niagara-spawn.html","引擎/ue4/niagara/simulation-stages.html","引擎/ue4/trouble-shooting/透明物体间的排序问题.html","引擎/ue4/trouble-shooting/trouble-shooting.html","引擎/ue4/ue4.html","引擎/引擎.html","dcc/ae插件/变量/变量.html","dcc/ae插件/变量/值.html","dcc/ae插件/变量/ui.html","dcc/ae插件/坑.html","dcc/ae插件/ae插件.html","dcc/dcc.html","houdini-toolset/安装配置/安装.html","houdini-toolset/安装配置/安装配置.html","houdini-toolset/功能/菜单功能/变量右键菜单.html","houdini-toolset/功能/菜单功能/菜单功能.html","houdini-toolset/功能/菜单功能/节点右键菜单.html","houdini-toolset/功能/菜单功能/主菜单.html","houdini-toolset/功能/代码库.html","houdini-toolset/功能/功能.html","houdini-toolset/功能/快速命令.html","houdini-toolset/功能/移动&复制节点连接.html","houdini-toolset/功能/houdini-ai助手.html","houdini-toolset/功能/houdini节点.html","houdini-toolset/简介.html","houdini-toolset/houdini-toolset.html","index.html"],nodeCount:77,linkSources:[11,13,72,72,74,74,74,74,74,74,74,74],linkTargets:[15,12,67,70,62,73,70,67,66,64,71,68],labels:["访问类的私有成员和方法","C++","编程","动态设计","Seven课程笔记","复古与潮流的碰撞！绝区零设计元素&风格完全分析","平面设计","设计","replace_absolute_paths","基础+GAN","截图笔记","基础","扩散模型","实践之Mesh Diffusion","杂项理论","重参数技巧","深度学习","我的项目","Portable Houdini","色彩","色彩空间、HDR和ACES","其他","字体“大小”","OpenGL","OpenGL踩坑实录","ImGui文字渲染","ImGui中使用Vulkan渲染窗口","Vulkan","Vulkan的Setup","图形API","渲染相关","材质","材质编译","反射&序列化系统","枚举","引擎源码","材质","跨蓝图","粒子","时间和动画","Blue Print","Construct Script和Event Graph","坑","其他","指令数优化","Houdini For Niagara","Niagara","Niagara Module","Niagara Render","Niagara Ribbon","Niagara Spawn","Simulation Stages","透明物体间的排序问题","Trouble Shooting","UE4","引擎","变量","值","UI","坑","AE插件","DCC","安装","安装配置","变量右键菜单","菜单功能","节点右键菜单","主菜单","代码库","功能","快速命令","移动&复制节点连接","Houdini AI助手","Houdini节点","简介","Houdini-Toolset","Index"],radii:[3,3,3,3,3,3,3,3,3,3,3,4.15234375,4.15234375,4.15234375,3,4.15234375,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4.15234375,3,4.15234375,3,4.15234375,5.109375,4.15234375,3,5.109375,4.15234375,5.109375,4.15234375,7,3,3],linkCount:12},attractionForce=1,linkLength=10,repulsionForce=150,centralForce=3,edgePruning=100</script></head><body class="theme-dark show-ribbon loading"><div class="webpage-container"><div class="sidebar-left sidebar"><div class="sidebar-container"><div class="sidebar-sizer"><div class="sidebar-content-positioner"><div class="sidebar-content"><div><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="tree-container file-tree mod-nav-indicator" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Notebook</span><button class="clickable-icon collapse-tree-button is-collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">编程</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">C++</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="编程/c++/访问类的私有成员和方法.html"><span class="tree-item-title">访问类的私有成员和方法</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="编程/c++/c++.html"><span class="tree-item-title">C++</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="编程/编程.html"><span class="tree-item-title">编程</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">设计</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">动态设计</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="设计/动态设计/动态设计.html"><span class="tree-item-title">动态设计</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="设计/动态设计/seven课程笔记.html"><span class="tree-item-title">Seven课程笔记</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">平面设计</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="设计/平面设计/复古与潮流的碰撞！绝区零设计元素&amp;风格完全分析.html"><span class="tree-item-title">复古与潮流的碰撞！绝区零设计元素&amp;风格完全分析</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="设计/平面设计/平面设计.html"><span class="tree-item-title">平面设计</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="设计/设计.html"><span class="tree-item-title">设计</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="设计/replace_absolute_paths.html"><span class="tree-item-title">replace_absolute_paths</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">深度学习</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">基础+GAN</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="深度学习/基础+gan/基础+gan.html"><span class="tree-item-title">基础+GAN</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="深度学习/基础+gan/截图笔记.html"><span class="tree-item-title">截图笔记</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">扩散模型</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="深度学习/扩散模型/基础.html"><span class="tree-item-title">基础</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="深度学习/扩散模型/扩散模型.html"><span class="tree-item-title">扩散模型</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="深度学习/扩散模型/实践之mesh-diffusion.html"><span class="tree-item-title">实践之Mesh Diffusion</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">杂项理论</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="深度学习/杂项理论/杂项理论.html"><span class="tree-item-title">杂项理论</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="深度学习/杂项理论/重参数技巧.html"><span class="tree-item-title">重参数技巧</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="深度学习/深度学习.html"><span class="tree-item-title">深度学习</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">我的项目</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="我的项目/我的项目.html"><span class="tree-item-title">我的项目</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="我的项目/portable-houdini.html"><span class="tree-item-title">Portable Houdini</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">渲染相关</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">其他</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">色彩</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="渲染相关/其他/色彩/色彩.html"><span class="tree-item-title">色彩</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="渲染相关/其他/色彩/色彩空间.xmind"><span class="tree-item-title">色彩空间</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="渲染相关/其他/色彩/色彩空间.vsdx"><span class="tree-item-title">色彩空间</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="渲染相关/其他/色彩/色彩空间、hdr和aces.html"><span class="tree-item-title">色彩空间、HDR和ACES</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="渲染相关/其他/其他.html"><span class="tree-item-title">其他</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="渲染相关/其他/字体“大小”.html"><span class="tree-item-title">字体“大小”</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">图形API</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">OpenGL</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="渲染相关/图形api/opengl/opengl.html"><span class="tree-item-title">OpenGL</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="渲染相关/图形api/opengl/opengl踩坑实录.html"><span class="tree-item-title">OpenGL踩坑实录</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Vulkan</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="渲染相关/图形api/vulkan/imgui文字渲染.html"><span class="tree-item-title">ImGui文字渲染</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="渲染相关/图形api/vulkan/imgui中使用vulkan渲染窗口.html"><span class="tree-item-title">ImGui中使用Vulkan渲染窗口</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="渲染相关/图形api/vulkan/vulkan.html"><span class="tree-item-title">Vulkan</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="渲染相关/图形api/vulkan/vulkan的setup.html"><span class="tree-item-title">Vulkan的Setup</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="渲染相关/图形api/图形api.html"><span class="tree-item-title">图形API</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="渲染相关/渲染相关.html"><span class="tree-item-title">渲染相关</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">引擎</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">UE4</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">引擎源码</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">材质</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/引擎源码/材质/材质.html"><span class="tree-item-title">材质</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/引擎源码/材质/材质编译.html"><span class="tree-item-title">材质编译</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">反射&amp;序列化系统</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/引擎源码/反射&amp;序列化系统/反射&amp;序列化系统.html"><span class="tree-item-title">反射&amp;序列化系统</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/引擎源码/反射&amp;序列化系统/枚举.html"><span class="tree-item-title">枚举</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/引擎源码/引擎源码.html"><span class="tree-item-title">引擎源码</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Blue Print</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/blue-print/材质.html"><span class="tree-item-title">材质</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/blue-print/跨蓝图.html"><span class="tree-item-title">跨蓝图</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/blue-print/粒子.html"><span class="tree-item-title">粒子</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/blue-print/时间和动画.html"><span class="tree-item-title">时间和动画</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/blue-print/blue-print.html"><span class="tree-item-title">Blue Print</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/blue-print/construct-script和event-graph.html"><span class="tree-item-title">Construct Script和Event Graph</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Niagara</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/niagara/坑.html"><span class="tree-item-title">坑</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/niagara/其他.html"><span class="tree-item-title">其他</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/niagara/指令数优化.html"><span class="tree-item-title">指令数优化</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/niagara/houdini-for-niagara.html"><span class="tree-item-title">Houdini For Niagara</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/niagara/niagara.html"><span class="tree-item-title">Niagara</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/niagara/niagara-module.html"><span class="tree-item-title">Niagara Module</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/niagara/niagara-render.html"><span class="tree-item-title">Niagara Render</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/niagara/niagara-ribbon.html"><span class="tree-item-title">Niagara Ribbon</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/niagara/niagara-spawn.html"><span class="tree-item-title">Niagara Spawn</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/niagara/simulation-stages.html"><span class="tree-item-title">Simulation Stages</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Trouble Shooting</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/trouble-shooting/透明物体间的排序问题.html"><span class="tree-item-title">透明物体间的排序问题</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/trouble-shooting/trouble-shooting.html"><span class="tree-item-title">Trouble Shooting</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/ue4/ue4.html"><span class="tree-item-title">UE4</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="引擎/引擎.html"><span class="tree-item-title">引擎</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">DCC</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">AE插件</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">变量</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="dcc/ae插件/变量/变量.html"><span class="tree-item-title">变量</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="dcc/ae插件/变量/值.html"><span class="tree-item-title">值</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="dcc/ae插件/变量/ui.html"><span class="tree-item-title">UI</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="dcc/ae插件/坑.html"><span class="tree-item-title">坑</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="dcc/ae插件/ae插件.html"><span class="tree-item-title">AE插件</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="dcc/dcc.html"><span class="tree-item-title">DCC</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Houdini-Toolset</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">安装配置</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="houdini-toolset/安装配置/安装.html"><span class="tree-item-title">安装</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="houdini-toolset/安装配置/安装配置.html"><span class="tree-item-title">安装配置</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">功能</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">菜单功能</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="houdini-toolset/功能/菜单功能/变量右键菜单.html"><span class="tree-item-title">变量右键菜单</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="houdini-toolset/功能/菜单功能/菜单功能.html"><span class="tree-item-title">菜单功能</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="houdini-toolset/功能/菜单功能/节点右键菜单.html"><span class="tree-item-title">节点右键菜单</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="houdini-toolset/功能/菜单功能/主菜单.html"><span class="tree-item-title">主菜单</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="houdini-toolset/功能/代码库.html"><span class="tree-item-title">代码库</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="houdini-toolset/功能/功能.html"><span class="tree-item-title">功能</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="houdini-toolset/功能/快速命令.html"><span class="tree-item-title">快速命令</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="houdini-toolset/功能/移动&amp;复制节点连接.html"><span class="tree-item-title">移动&amp;复制节点连接</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="houdini-toolset/功能/houdini-ai助手.html"><span class="tree-item-title">Houdini AI助手</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="houdini-toolset/功能/houdini节点.html"><span class="tree-item-title">Houdini节点</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="houdini-toolset/简介.html"><span class="tree-item-title">简介</span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-tree-file" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="houdini-toolset/houdini-toolset.html"><span class="tree-item-title">Houdini-Toolset</span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-tree-file" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="index.html"><span class="tree-item-title">Index</span></a></div><div class="tree-item-children"></div></div></div></div></div></div></div></div><div class="sidebar-gutter"><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div></div><div class="document-container show"><div class="markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings show-indentation-guide allow-fold-lists show-properties" style="tab-size:4"><style id="MJX-CHTML-styles">mjx-container[jax=CHTML]{line-height:0}mjx-container [space="1"]{margin-left:.111em}mjx-container [space="2"]{margin-left:.167em}mjx-container [space="3"]{margin-left:.222em}mjx-container [space="4"]{margin-left:.278em}mjx-container [space="5"]{margin-left:.333em}mjx-container [rspace="1"]{margin-right:.111em}mjx-container [rspace="2"]{margin-right:.167em}mjx-container [rspace="3"]{margin-right:.222em}mjx-container [rspace="4"]{margin-right:.278em}mjx-container [rspace="5"]{margin-right:.333em}mjx-container [size="s"]{font-size:70.7%}mjx-container [size=ss]{font-size:50%}mjx-container [size=Tn]{font-size:60%}mjx-container [size=sm]{font-size:85%}mjx-container [size=lg]{font-size:120%}mjx-container [size=Lg]{font-size:144%}mjx-container [size=LG]{font-size:173%}mjx-container [size=hg]{font-size:207%}mjx-container [size=HG]{font-size:249%}mjx-container [width=full]{width:100%}mjx-box{display:inline-block}mjx-block{display:block}mjx-itable{display:inline-table}mjx-row{display:table-row}mjx-row>*{display:table-cell}mjx-mtext{display:inline-block}mjx-mstyle{display:inline-block}mjx-merror{display:inline-block;color:red;background-color:#ff0}mjx-mphantom{visibility:hidden}mjx-assistive-mml{top:0;left:0;clip:rect(1px,1px,1px,1px);user-select:none;position:absolute!important;padding:1px 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important}mjx-assistive-mml[display=block]{width:100%!important}mjx-math{display:inline-block;text-align:left;line-height:0;text-indent:0;font-style:normal;font-weight:400;font-size:100%;letter-spacing:normal;border-collapse:collapse;overflow-wrap:normal;word-spacing:normal;white-space:nowrap;direction:ltr;padding:1px 0}mjx-container[jax=CHTML][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=CHTML][display=true][width=full]{display:flex}mjx-container[jax=CHTML][display=true] mjx-math{padding:0}mjx-container[jax=CHTML][justify=left]{text-align:left}mjx-container[jax=CHTML][justify=right]{text-align:right}mjx-mo{display:inline-block;text-align:left}mjx-stretchy-h{display:inline-table;width:100%}mjx-stretchy-h>*{display:table-cell;width:0}mjx-stretchy-h>*>mjx-c{display:inline-block;transform:scaleX(1)}mjx-stretchy-h>*>mjx-c::before{display:inline-block;width:initial}mjx-stretchy-h>mjx-ext{overflow:clip visible;width:100%}mjx-stretchy-h>mjx-ext>mjx-c::before{transform:scaleX(500)}mjx-stretchy-h>mjx-ext>mjx-c{width:0}mjx-stretchy-h>mjx-beg>mjx-c{margin-right:-.1em}mjx-stretchy-h>mjx-end>mjx-c{margin-left:-.1em}mjx-stretchy-v{display:inline-block}mjx-stretchy-v>*{display:block}mjx-stretchy-v>mjx-beg{height:0}mjx-stretchy-v>mjx-end>mjx-c{display:block}mjx-stretchy-v>*>mjx-c{transform:scaleY(1);transform-origin:left center;overflow:hidden}mjx-stretchy-v>mjx-ext{display:block;height:100%;box-sizing:border-box;border:0 solid transparent;overflow:visible clip}mjx-stretchy-v>mjx-ext>mjx-c::before{width:initial;box-sizing:border-box}mjx-stretchy-v>mjx-ext>mjx-c{transform:scaleY(500) translateY(.075em);overflow:visible}mjx-mark{display:inline-block;height:0}mjx-c{display:inline-block}mjx-utext{display:inline-block;padding:.75em 0 .2em}mjx-mi{display:inline-block;text-align:left}mjx-mn{display:inline-block;text-align:left}mjx-c::before{display:block;width:0}.MJX-TEX{font-family:MJXZERO,MJXTEX}.TEX-B{font-family:MJXZERO,MJXTEX-B}.TEX-I{font-family:MJXZERO,MJXTEX-I}.TEX-MI{font-family:MJXZERO,MJXTEX-MI}.TEX-BI{font-family:MJXZERO,MJXTEX-BI}.TEX-S1{font-family:MJXZERO,MJXTEX-S1}.TEX-S2{font-family:MJXZERO,MJXTEX-S2}.TEX-S3{font-family:MJXZERO,MJXTEX-S3}.TEX-S4{font-family:MJXZERO,MJXTEX-S4}.TEX-A{font-family:MJXZERO,MJXTEX-A}.TEX-C{font-family:MJXZERO,MJXTEX-C}.TEX-CB{font-family:MJXZERO,MJXTEX-CB}.TEX-FR{font-family:MJXZERO,MJXTEX-FR}.TEX-FRB{font-family:MJXZERO,MJXTEX-FRB}.TEX-SS{font-family:MJXZERO,MJXTEX-SS}.TEX-SSB{font-family:MJXZERO,MJXTEX-SSB}.TEX-SSI{font-family:MJXZERO,MJXTEX-SSI}.TEX-SC{font-family:MJXZERO,MJXTEX-SC}.TEX-T{font-family:MJXZERO,MJXTEX-T}.TEX-V{font-family:MJXZERO,MJXTEX-V}.TEX-VB{font-family:MJXZERO,MJXTEX-VB}mjx-stretchy-h mjx-c,mjx-stretchy-v mjx-c{font-family:MJXZERO,MJXTEX-S1,MJXTEX-S4,MJXTEX,MJXTEX-A!important}@font-face{font-family:MJXZERO;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Zero.woff") format("woff")}@font-face{font-family:MJXTEX;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Main-Regular.woff") format("woff")}@font-face{font-family:MJXTEX-B;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Main-Bold.woff") format("woff")}@font-face{font-family:MJXTEX-I;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Math-Italic.woff") format("woff")}@font-face{font-family:MJXTEX-MI;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Main-Italic.woff") format("woff")}@font-face{font-family:MJXTEX-BI;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Math-BoldItalic.woff") format("woff")}@font-face{font-family:MJXTEX-S1;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Size1-Regular.woff") format("woff")}@font-face{font-family:MJXTEX-S2;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Size2-Regular.woff") format("woff")}@font-face{font-family:MJXTEX-S3;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Size3-Regular.woff") format("woff")}@font-face{font-family:MJXTEX-S4;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Size4-Regular.woff") format("woff")}@font-face{font-family:MJXTEX-A;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_AMS-Regular.woff") format("woff")}@font-face{font-family:MJXTEX-C;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Regular.woff") format("woff")}@font-face{font-family:MJXTEX-CB;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Bold.woff") format("woff")}@font-face{font-family:MJXTEX-FR;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Fraktur-Regular.woff") format("woff")}@font-face{font-family:MJXTEX-FRB;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Fraktur-Bold.woff") format("woff")}@font-face{font-family:MJXTEX-SS;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_SansSerif-Regular.woff") format("woff")}@font-face{font-family:MJXTEX-SSB;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_SansSerif-Bold.woff") format("woff")}@font-face{font-family:MJXTEX-SSI;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_SansSerif-Italic.woff") format("woff")}@font-face{font-family:MJXTEX-SC;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Script-Regular.woff") format("woff")}@font-face{font-family:MJXTEX-T;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Typewriter-Regular.woff") format("woff")}@font-face{font-family:MJXTEX-V;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Vector-Regular.woff") format("woff")}@font-face{font-family:MJXTEX-VB;src:url("https://publish.obsidian.md/lib/mathjax/output/chtml/fonts/woff-v2/MathJax_Vector-Bold.woff") format("woff")}mjx-c.mjx-c7C::before{padding:.75em .278em .249em 0;content:"|"}mjx-c.mjx-c1D465.TEX-I::before{padding:.442em .572em .011em 0;content:"x"}mjx-c.mjx-c2B::before{padding:.583em .778em .082em 0;content:"+"}mjx-c.mjx-c1D466.TEX-I::before{padding:.442em .49em .205em 0;content:"y"}mjx-c.mjx-c1D467.TEX-I::before{padding:.442em .465em .011em 0;content:"z"}mjx-c.mjx-c3D::before{padding:.583em .778em .082em 0;content:"="}mjx-c.mjx-c31::before{padding:.666em .5em 0 0;content:"1"}</style><div class="markdown-preview-sizer markdown-preview-section" style="min-height:44818px"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div><div class="mod-header"><div class="inline-title" data-heading="材质编译" id="材质编译" style="display:block">材质编译</div></div><div><p dir="auto"><span alt="Pasted image 20240330213343.png" src="lib\media\pasted-image-20240330213343.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20240330213343.png" src="lib\media\pasted-image-20240330213343.png"></span>关于UE的整个材质系统运行流程可以参考<a data-tooltip-position="top" aria-label="https://zhuanlan.zhihu.com/p/616841427" rel="noopener" class="external-link" href="https://zhuanlan.zhihu.com/p/616841427" target="_blank">此文章</a>。</p></div><div class="heading-wrapper"><h2 data-heading="材质节点编译全流程" dir="auto" class="heading" id="材质节点编译全流程"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>材质节点编译全流程<div class="heading-after">...</div></h2><div class="heading-children"><div><p dir="auto">首先介绍一下会涉及到的几个类，让大家有个初步印象。</p></div><div><ul dir="auto"><li data-line="0" dir="auto"><em>FMaterialCompiler</em>。用来对材质节点进行编译生成HLSL代码的基类，在UE的材质节点中，通常使用其子类<em>FHLSLMaterialTranslator</em>进行编译。</li><li data-line="1" dir="auto"><em>UMaterialExpression</em>。表达式基类，定义了表达式的作用。</li><li data-line="2" dir="auto"><em>FExpressionInput</em>。大部分表达式需要有输入参数，这个类就代表了输入参数。</li></ul></div><div><p dir="auto">材质节点系统生成HLSL代码的过程确实类似于一个编译器编译的过程，下面对生成代码过程的讲解会向编译器的方向靠拢。 为了方便起见，以下都用最简单的<strong>Add</strong>节点为例。</p></div><div class="heading-wrapper"><h3 data-heading="表达式输入-->Operand" dir="auto" class="heading" id="表达式输入-->Operand"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>表达式输入--&gt;Operand<div class="heading-after">...</div></h3><div class="heading-children"><div><p dir="auto">Add节点包含两个输入，节点输入的实际类型是<em>FExpressionInput</em>。 <em>FExpressionInput</em>类型包含了与其直接相连的上游节点的<em>UMaterialExpression</em>和输出pin的index信息，因此其最重要的<em>Compile</em>函数会在有上游节点的情况下，会调用<em>FMaterialCompiler</em>类的<em>CallExpression</em>函数，以获取到上游节点的结果。 下面在讲解<em>FMaterialCompiler</em>的部分会更加详细地讲解<em>CallExpression</em>函数的执行过程。</p></div></div></div><div class="heading-wrapper"><h3 data-heading="表达式-->Operator" dir="auto" class="heading" id="表达式-->Operator"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>表达式--&gt;Operator<div class="heading-after">...</div></h3><div class="heading-children"><div><p dir="auto"><em>UMaterialExpression</em>是节点表达式类，此类包含了输入的信息FExpressionInput，并通过重载Compile函数来自定义“运算”。</p></div><div><div class="mermaid" dir="auto"><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-7.5 -8 458.828125 749.765625" height="749.765625" xmlns="http://www.w3.org/2000/svg" id="mermaid-34994ae08ad270f4-10" style="width:458.828px;max-width:100%"><style>#mermaid-34994ae08ad270f4-10{font-family:var(--font-mermaid);font-size:16px;fill:var(--text-normal)}#mermaid-34994ae08ad270f4-10 .error-icon{fill:var(--background-primary)}#mermaid-34994ae08ad270f4-10 .error-text{fill:var(--text-error);stroke:var(--text-error)}#mermaid-34994ae08ad270f4-10 .edge-thickness-normal{stroke-width:2px}#mermaid-34994ae08ad270f4-10 .edge-thickness-thick{stroke-width:3.5px}#mermaid-34994ae08ad270f4-10 .edge-pattern-solid{stroke-dasharray:0}#mermaid-34994ae08ad270f4-10 .edge-pattern-dashed{stroke-dasharray:3}#mermaid-34994ae08ad270f4-10 .edge-pattern-dotted{stroke-dasharray:2}#mermaid-34994ae08ad270f4-10 .marker{fill:var(--text-normal);stroke:var(--text-normal)}#mermaid-34994ae08ad270f4-10 .marker.cross{stroke:var(--text-normal)}#mermaid-34994ae08ad270f4-10 svg{font-family:var(--font-mermaid);font-size:16px}#mermaid-34994ae08ad270f4-10 .label{font-family:var(--font-mermaid);color:var(--text-normal)}#mermaid-34994ae08ad270f4-10 .cluster-label text{fill:var(--text-normal)}#mermaid-34994ae08ad270f4-10 .cluster-label span,#mermaid-34994ae08ad270f4-10 p{color:var(--text-normal)}#mermaid-34994ae08ad270f4-10 .label text,#mermaid-34994ae08ad270f4-10 p,#mermaid-34994ae08ad270f4-10 span{fill:var(--text-normal);color:var(--text-normal)}#mermaid-34994ae08ad270f4-10 .node circle,#mermaid-34994ae08ad270f4-10 .node ellipse,#mermaid-34994ae08ad270f4-10 .node path,#mermaid-34994ae08ad270f4-10 .node polygon,#mermaid-34994ae08ad270f4-10 .node rect{fill:var(--background-primary);stroke:var(--text-muted);stroke-width:1px}#mermaid-34994ae08ad270f4-10 .flowchart-label text{text-anchor:middle}#mermaid-34994ae08ad270f4-10 .node .label{text-align:center}#mermaid-34994ae08ad270f4-10 .node.clickable{cursor:pointer}#mermaid-34994ae08ad270f4-10 .arrowheadPath{fill:#0b0b0b}#mermaid-34994ae08ad270f4-10 .edgePath .path{stroke:var(--text-normal);stroke-width:2px}#mermaid-34994ae08ad270f4-10 .flowchart-link{stroke:var(--text-normal);fill:none}#mermaid-34994ae08ad270f4-10 .edgeLabel{background-color:var(--background-secondary);text-align:center}#mermaid-34994ae08ad270f4-10 .edgeLabel rect{opacity:.5;background-color:var(--background-secondary);fill:var(--background-secondary)}#mermaid-34994ae08ad270f4-10 .labelBkg{background-color:var(--background-secondary)}#mermaid-34994ae08ad270f4-10 .cluster rect{fill:hsl(220.5882352941,100%,98.3333333333%);stroke:hsl(220.5882352941,60%,88.3333333333%);stroke-width:1px}#mermaid-34994ae08ad270f4-10 .cluster text{fill:var(--text-normal)}#mermaid-34994ae08ad270f4-10 .cluster span,#mermaid-34994ae08ad270f4-10 p{color:var(--text-normal)}#mermaid-34994ae08ad270f4-10 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:var(--font-mermaid);font-size:12px;background:var(--background-secondary-alt);border:1px solid hsl(220.5882352941,60%,88.3333333333%);border-radius:2px;pointer-events:none;z-index:100}#mermaid-34994ae08ad270f4-10 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:var(--text-normal)}#mermaid-34994ae08ad270f4-10 foreignObject{overflow:visible}#mermaid-34994ae08ad270f4-10 #arrowhead,#mermaid-34994ae08ad270f4-10 #sequencenumber,#mermaid-34994ae08ad270f4-10 .cluster text,#mermaid-34994ae08ad270f4-10 .label text,#mermaid-34994ae08ad270f4-10 text,#mermaid-34994ae08ad270f4-10 text.actor{fill:var(--text-normal)}#mermaid-34994ae08ad270f4-10 line{stroke:var(--text-normal)}#mermaid-34994ae08ad270f4-10 .label rect{display:none}#mermaid-34994ae08ad270f4-10 .cluster rect{stroke-width:1px}#mermaid-34994ae08ad270f4-10 .node circle,#mermaid-34994ae08ad270f4-10 .node ellipse,#mermaid-34994ae08ad270f4-10 .node path,#mermaid-34994ae08ad270f4-10 .node polygon,#mermaid-34994ae08ad270f4-10 .node rect{fill:var(--background-secondary-alt);stroke:var(--background-modifier-border);stroke-width:1px}#mermaid-34994ae08ad270f4-10 .node .label{text-align:center}#mermaid-34994ae08ad270f4-10 .node.clickable{cursor:pointer}#mermaid-34994ae08ad270f4-10 .arrowheadPath{fill:var(--text-muted)}#mermaid-34994ae08ad270f4-10 .edgePath .path{stroke:var(--text-muted);stroke-width:1.5px}#mermaid-34994ae08ad270f4-10 .edgeLabel{background-color:var(--background-primary);text-align:center}#mermaid-34994ae08ad270f4-10 .cluster rect{fill:var(--background-primary-alt);stroke:var(--background-modifier-border)}#mermaid-34994ae08ad270f4-10 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-size:12px;background:var(--background-secondary);border:1px solid var(--interactive-accent);border-radius:2px;pointer-events:none;z-index:100}#mermaid-34994ae08ad270f4-10 .actor{stroke:var(--background-modifier-border);fill:var(--background-secondary-alt);font-family:inherit!important}#mermaid-34994ae08ad270f4-10 text.actor{stroke:none}#mermaid-34994ae08ad270f4-10 .actor-line{stroke:var(--text-muted)}#mermaid-34994ae08ad270f4-10 .messageLine0,#mermaid-34994ae08ad270f4-10 .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:var(--text-normal)}#mermaid-34994ae08ad270f4-10 #crosshead path{fill:var(--text-normal)!important;stroke:var(--text-normal)!important}#mermaid-34994ae08ad270f4-10 .messageText{fill:var(--text-normal);stroke:none;font-family:inherit!important}#mermaid-34994ae08ad270f4-10 .labelBox{stroke:var(--background-modifier-border);fill:var(--background-secondary-alt)}#mermaid-34994ae08ad270f4-10 .labelText,#mermaid-34994ae08ad270f4-10 .loopText{fill:var(--text-normal);stroke:none}#mermaid-34994ae08ad270f4-10 .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:var(--background-modifier-border)}#mermaid-34994ae08ad270f4-10 .activation0,#mermaid-34994ae08ad270f4-10 .activation1,#mermaid-34994ae08ad270f4-10 .activation2{fill:var(--background-secondary) stroke:var(--text-muted)}#mermaid-34994ae08ad270f4-10 .section{stroke:none;opacity:.2}#mermaid-34994ae08ad270f4-10 .section0,#mermaid-34994ae08ad270f4-10 .section2{fill:var(--text-accent)}#mermaid-34994ae08ad270f4-10 .section1,#mermaid-34994ae08ad270f4-10 .section3{fill:#fff;opacity:.2}#mermaid-34994ae08ad270f4-10 .sectionTitle0,#mermaid-34994ae08ad270f4-10 .sectionTitle1,#mermaid-34994ae08ad270f4-10 .sectionTitle2,#mermaid-34994ae08ad270f4-10 .sectionTitle3{fill:var(--text-normal)}#mermaid-34994ae08ad270f4-10 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px}#mermaid-34994ae08ad270f4-10 .grid .tick{stroke:var(--background-primary-alt);opacity:.8;shape-rendering:crispEdges}#mermaid-34994ae08ad270f4-10 .grid path{stroke-width:0}#mermaid-34994ae08ad270f4-10 .today{fill:none;stroke:#d42;stroke-width:2px}#mermaid-34994ae08ad270f4-10 .task{stroke-width:2}#mermaid-34994ae08ad270f4-10 .taskText{text-anchor:middle}#mermaid-34994ae08ad270f4-10 .taskText:not([font-size]){font-size:11px}#mermaid-34994ae08ad270f4-10 .taskTextOutsideRight{fill:var(--text-normal);text-anchor:start;font-size:11px}#mermaid-34994ae08ad270f4-10 .taskTextOutsideLeft{fill:var(--text-normal);text-anchor:end;font-size:11px}#mermaid-34994ae08ad270f4-10 .task.clickable,#mermaid-34994ae08ad270f4-10 g.clickable{cursor:pointer}#mermaid-34994ae08ad270f4-10 .taskText.clickable,#mermaid-34994ae08ad270f4-10 .taskTextOutsideLeft.clickable,#mermaid-34994ae08ad270f4-10 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163!important;font-weight:700}#mermaid-34994ae08ad270f4-10 .taskText0,#mermaid-34994ae08ad270f4-10 .taskText1,#mermaid-34994ae08ad270f4-10 .taskText2,#mermaid-34994ae08ad270f4-10 .taskText3{fill:#fff}#mermaid-34994ae08ad270f4-10 .task0,#mermaid-34994ae08ad270f4-10 .task1,#mermaid-34994ae08ad270f4-10 .task2,#mermaid-34994ae08ad270f4-10 .task3{fill:var(--interactive-accent);stroke:var(--interactive-accent)}#mermaid-34994ae08ad270f4-10 .taskTextOutside0,#mermaid-34994ae08ad270f4-10 .taskTextOutside1,#mermaid-34994ae08ad270f4-10 .taskTextOutside2,#mermaid-34994ae08ad270f4-10 .taskTextOutside3{fill:var(--text-normal)}#mermaid-34994ae08ad270f4-10 .active0,#mermaid-34994ae08ad270f4-10 .active1,#mermaid-34994ae08ad270f4-10 .active2,#mermaid-34994ae08ad270f4-10 .active3,#mermaid-34994ae08ad270f4-10 g.classGroup rect,#mermaid-34994ae08ad270f4-10 g.stateGroup rect{fill:var(--background-primary-alt);stroke:var(--background-modifier-border)}#mermaid-34994ae08ad270f4-10 g.classGroup rect,#mermaid-34994ae08ad270f4-10 g.stateGroup rect{stroke:var(--background-modifier-border)}#mermaid-34994ae08ad270f4-10 .activeText0,#mermaid-34994ae08ad270f4-10 .activeText1,#mermaid-34994ae08ad270f4-10 .activeText2,#mermaid-34994ae08ad270f4-10 .activeText3{fill:var(--text-normal)!important}#mermaid-34994ae08ad270f4-10 .done0,#mermaid-34994ae08ad270f4-10 .done1,#mermaid-34994ae08ad270f4-10 .done2,#mermaid-34994ae08ad270f4-10 .done3{stroke:var(--text-muted);fill:#bbb;stroke-width:2}#mermaid-34994ae08ad270f4-10 .doneText0,#mermaid-34994ae08ad270f4-10 .doneText1,#mermaid-34994ae08ad270f4-10 .doneText2,#mermaid-34994ae08ad270f4-10 .doneText3{fill:var(--text-normal)!important}#mermaid-34994ae08ad270f4-10 .crit0,#mermaid-34994ae08ad270f4-10 .crit1,#mermaid-34994ae08ad270f4-10 .crit2,#mermaid-34994ae08ad270f4-10 .crit3{stroke:#b1361b;fill:#d42;stroke-width:2}#mermaid-34994ae08ad270f4-10 .activeCrit0,#mermaid-34994ae08ad270f4-10 .activeCrit1,#mermaid-34994ae08ad270f4-10 .activeCrit2,#mermaid-34994ae08ad270f4-10 .activeCrit3,#mermaid-34994ae08ad270f4-10 .classLabel .box{stroke:#b1361b;fill:var(--background-secondary-alt);stroke-width:2}#mermaid-34994ae08ad270f4-10 .classLabel .box{stroke:none;stroke-width:0;opacity:.5}#mermaid-34994ae08ad270f4-10 .doneCrit0,#mermaid-34994ae08ad270f4-10 .doneCrit1,#mermaid-34994ae08ad270f4-10 .doneCrit2,#mermaid-34994ae08ad270f4-10 .doneCrit3{stroke:#b1361b;fill:#bbb;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-34994ae08ad270f4-10 .milestone{transform:rotate(45deg) scale(.8,.8)}#mermaid-34994ae08ad270f4-10 .milestoneText{font-style:italic}#mermaid-34994ae08ad270f4-10 .activeCritText0,#mermaid-34994ae08ad270f4-10 .activeCritText1,#mermaid-34994ae08ad270f4-10 .activeCritText2,#mermaid-34994ae08ad270f4-10 .activeCritText3,#mermaid-34994ae08ad270f4-10 .doneCritText0,#mermaid-34994ae08ad270f4-10 .doneCritText1,#mermaid-34994ae08ad270f4-10 .doneCritText2,#mermaid-34994ae08ad270f4-10 .doneCritText3{fill:var(--text-normal)!important}#mermaid-34994ae08ad270f4-10 .titleText{text-anchor:middle;font-size:18px;fill:var(--text-normal)}#mermaid-34994ae08ad270f4-10 g.classGroup text{fill:var(--text-normal);stroke:none;font-size:11px}#mermaid-34994ae08ad270f4-10 g.classGroup text .title{font-weight:bolder}#mermaid-34994ae08ad270f4-10 #aggregationEnd,#mermaid-34994ae08ad270f4-10 #aggregationStart,#mermaid-34994ae08ad270f4-10 #compositionEnd,#mermaid-34994ae08ad270f4-10 #compositionStart,#mermaid-34994ae08ad270f4-10 g.classGroup line,#mermaid-34994ae08ad270f4-10 g.stateGroup line{stroke:var(--background-modifier-border);stroke-width:1}#mermaid-34994ae08ad270f4-10 .classLabel .label{font-size:11px}#mermaid-34994ae08ad270f4-10 .relation{fill:none}#mermaid-34994ae08ad270f4-10 .dashed-line{stroke-dasharray:3}#mermaid-34994ae08ad270f4-10 #compositionEnd,#mermaid-34994ae08ad270f4-10 #compositionStart{fill:var(--background-modifier-border)}#mermaid-34994ae08ad270f4-10 #aggregationEnd,#mermaid-34994ae08ad270f4-10 #aggregationStart{fill:var(--background-secondary-alt)}#mermaid-34994ae08ad270f4-10 #dependencyEnd,#mermaid-34994ae08ad270f4-10 #dependencyStart,#mermaid-34994ae08ad270f4-10 #extensionEnd,#mermaid-34994ae08ad270f4-10 #extensionStart{fill:var(--background-modifier-border);stroke:var(--background-modifier-border);stroke-width:1}#mermaid-34994ae08ad270f4-10 .branch-label,#mermaid-34994ae08ad270f4-10 .commit-id,#mermaid-34994ae08ad270f4-10 .commit-msg{fill:#d3d3d3;color:#d3d3d3}#mermaid-34994ae08ad270f4-10 .pieTitleText{text-anchor:middle;font-size:25px;fill:var(--text-normal)}#mermaid-34994ae08ad270f4-10 .state-note text,#mermaid-34994ae08ad270f4-10 g.stateGroup text{stroke:none;font-size:10px}#mermaid-34994ae08ad270f4-10 g.stateGroup .state-title{font-weight:bolder;fill:var(--text-normal)}#mermaid-34994ae08ad270f4-10 .stateGroup .composit{fill:#fff;border-bottom:1px}#mermaid-34994ae08ad270f4-10 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-34994ae08ad270f4-10 .state-note{stroke:#645c10;fill:#f3edb3}#mermaid-34994ae08ad270f4-10 .state-note text{fill:#000}#mermaid-34994ae08ad270f4-10 .stateLabel .box{stroke:none;stroke-width:0;fill:var(--background-secondary-alt);opacity:.5}#mermaid-34994ae08ad270f4-10 .stateLabel text{fill:var(--text-normal);font-size:10px;font-weight:700}#mermaid-34994ae08ad270f4-10 .node circle.state-start{fill:var(--text-normal);stroke:var(--text-normal)}#mermaid-34994ae08ad270f4-10 .node circle.state-end{stroke:var(--background-primary);stroke-width:2}#mermaid-34994ae08ad270f4-10 #statediagram-barbEnd,#mermaid-34994ae08ad270f4-10 g.stateGroup text{fill:var(--background-modifier-border)}#mermaid-34994ae08ad270f4-10 .statediagram-cluster rect{stroke-width:1px}#mermaid-34994ae08ad270f4-10 .statediagram-cluster rect,#mermaid-34994ae08ad270f4-10 .statediagram-state .divider{stroke:var(--background-modifier-border)}#mermaid-34994ae08ad270f4-10 .statediagram-cluster rect .inner{fill:var(--background-secondary-alt)}#mermaid-34994ae08ad270f4-10 .statediagram-cluster.statediagram-cluster-alt .inner{fill:var(--background-secondary)}#mermaid-34994ae08ad270f4-10 .cluster-label text,#mermaid-34994ae08ad270f4-10 .node circle.state-end{fill:var(--text-normal)}#mermaid-34994ae08ad270f4-10 .statediagram-state rect.divider{stroke-dasharray:10,10;fill:var(--background-secondary)}#mermaid-34994ae08ad270f4-10 .note-edge{stroke-dasharray:5}#mermaid-34994ae08ad270f4-10 .statediagram-note rect{fill:#f3edb3;stroke:#645c10;stroke-width:1px}#mermaid-34994ae08ad270f4-10 .error-icon{fill:var(--background-modifier-error)}#mermaid-34994ae08ad270f4-10 .error-text{fill:var(--text-error);stroke:var(--text-error)}#mermaid-34994ae08ad270f4-10 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif}</style><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="6" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-34994ae08ad270f4-10_flowchart-pointEnd"><path style="stroke-width:1;stroke-dasharray:1,0" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-34994ae08ad270f4-10_flowchart-pointStart"><path style="stroke-width:1;stroke-dasharray:1,0" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-34994ae08ad270f4-10_flowchart-circleEnd"><circle style="stroke-width:1;stroke-dasharray:1,0" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-34994ae08ad270f4-10_flowchart-circleStart"><circle style="stroke-width:1;stroke-dasharray:1,0" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="mermaid-34994ae08ad270f4-10_flowchart-crossEnd"><path style="stroke-width:2;stroke-dasharray:1,0" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="mermaid-34994ae08ad270f4-10_flowchart-crossStart"><path style="stroke-width:2;stroke-dasharray:1,0" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"></g><g class="edgeLabels"></g><g class="nodes"><g transform="translate(-7.5, -8)" class="root"><g class="clusters"><g id="节点编译" class="cluster default flowchart-label"><rect height="384.78125" width="442.828125" y="8" x="8" ry="0" rx="0"></rect><g transform="translate(197.4140625, 8)" class="cluster-label"><foreignObject height="20.796875" width="64"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">节点编译</span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid-34994ae08ad270f4-10_flowchart-pointEnd)" style="fill:none" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-t1 LE-t2" id="L-t1-t2-0" d="M193.794,68.797L182.093,74.697C170.391,80.596,146.989,92.396,135.287,103.312C123.586,114.228,123.586,124.261,123.586,129.277L123.586,134.294"></path><path marker-end="url(#mermaid-34994ae08ad270f4-10_flowchart-pointEnd)" style="fill:none" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-t1 LE-t3" id="L-t1-t3-0" d="M264.792,68.797L276.493,74.697C288.195,80.596,311.597,92.396,323.299,103.312C335,114.228,335,124.261,335,129.277L335,134.294"></path><path marker-end="url(#mermaid-34994ae08ad270f4-10_flowchart-pointEnd)" style="fill:none" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-t2 LE-t4" id="L-t2-t4-0" d="M123.586,175.391L123.586,181.29C123.586,187.19,123.586,198.99,135.415,210.853C147.244,222.717,170.902,234.646,182.731,240.61L194.56,246.574"></path><path marker-end="url(#mermaid-34994ae08ad270f4-10_flowchart-pointEnd)" style="fill:none" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-t3 LE-t4" id="L-t3-t4-0" d="M335,175.391L335,181.29C335,187.19,335,198.99,323.171,210.853C311.342,222.717,287.684,234.646,275.855,240.61L264.025,246.574"></path><path marker-end="url(#mermaid-34994ae08ad270f4-10_flowchart-pointEnd)" style="fill:none" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-t4 LE-HLSL代码" id="L-t4-HLSL代码-0" d="M229.293,281.984L229.293,286.151C229.293,290.318,229.293,298.651,229.293,306.101C229.293,313.551,229.293,320.118,229.293,323.401L229.293,326.684"></path></g><g class="edgeLabels"><g transform="translate(123.5859375, 104.1953125)" class="edgeLabel"><g transform="translate(-16, -10.3984375)" class="label"><foreignObject height="20.796875" width="32"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="edgeLabel">调用</span></div></foreignObject></g></g><g transform="translate(335, 104.1953125)" class="edgeLabel"><g transform="translate(-16, -10.3984375)" class="label"><foreignObject height="20.796875" width="32"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="edgeLabel">调用</span></div></foreignObject></g></g><g transform="translate(123.5859375, 210.7890625)" class="edgeLabel"><g transform="translate(-16, -10.3984375)" class="label"><foreignObject height="20.796875" width="32"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="edgeLabel">进行</span></div></foreignObject></g></g><g transform="translate(335, 210.7890625)" class="edgeLabel"><g transform="translate(-16, -10.3984375)" class="label"><foreignObject height="20.796875" width="32"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="edgeLabel">进行</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(229.29296875, 349.8828125)" id="flowchart-HLSL代码-11" class="node default default flowchart-label"><rect height="35.796875" width="82.296875" y="-17.8984375" x="-41.1484375" ry="0" rx="0" class="basic label-container"></rect><g transform="translate(-33.6484375, -10.3984375)" class="label"><rect></rect><foreignObject height="20.796875" width="67.296875"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">HLSL代码</span></div></foreignObject></g></g><g transform="translate(229.29296875, 50.8984375)" id="flowchart-t1-7" class="node default default flowchart-label"><rect height="35.796875" width="96.890625" y="-17.8984375" x="-48.4453125" ry="5" rx="5" class="basic label-container"></rect><g transform="translate(-40.9453125, -10.3984375)" class="label"><rect></rect><foreignObject height="20.796875" width="81.890625"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">C.Compile()</span></div></foreignObject></g></g><g transform="translate(123.5859375, 157.4921875)" id="flowchart-t2-8" class="node default default flowchart-label"><rect height="35.796875" width="161.171875" y="-17.8984375" x="-80.5859375" ry="5" rx="5" class="basic label-container"></rect><g transform="translate(-73.0859375, -10.3984375)" class="label"><rect></rect><foreignObject height="20.796875" width="146.171875"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">A.Compile()或常量值</span></div></foreignObject></g></g><g transform="translate(335, 157.4921875)" id="flowchart-t3-9" class="node default default flowchart-label"><rect height="35.796875" width="161.65625" y="-17.8984375" x="-80.828125" ry="5" rx="5" class="basic label-container"></rect><g transform="translate(-73.328125, -10.3984375)" class="label"><rect></rect><foreignObject height="20.796875" width="146.65625"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">B.Compile()或常量值</span></div></foreignObject></g></g><g transform="translate(229.29296875, 264.0859375)" id="flowchart-t4-10" class="node default default flowchart-label"><rect height="35.796875" width="60" y="-17.8984375" x="-30" ry="5" rx="5" class="basic label-container"></rect><g transform="translate(-22.5, -10.3984375)" class="label"><rect></rect><foreignObject height="20.796875" width="45"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">“运算”</span></div></foreignObject></g></g></g></g><g transform="translate(-5.30859375, 426.78125)" class="root"><g class="clusters"><g id="节点逻辑" class="cluster default flowchart-label"><rect height="298.984375" width="438.4453125" y="8" x="8" ry="0" rx="0"></rect><g transform="translate(195.22265625, 8)" class="cluster-label"><foreignObject height="20.796875" width="64"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">节点逻辑</span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid-34994ae08ad270f4-10_flowchart-pointEnd)" style="fill:none" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-A LE-C" id="L-A-C-0" d="M125.402,68.797L125.402,74.697C125.402,80.596,125.402,92.396,135.883,103.785C146.364,115.175,167.326,126.155,177.806,131.645L188.287,137.135"></path><path marker-end="url(#mermaid-34994ae08ad270f4-10_flowchart-pointEnd)" style="fill:none" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B LE-C" id="L-B-C-0" d="M328.902,68.797L328.902,74.697C328.902,80.596,328.902,92.396,318.422,103.785C307.941,115.175,286.979,126.155,276.498,131.645L266.017,137.135"></path><path marker-end="url(#mermaid-34994ae08ad270f4-10_flowchart-pointEnd)" style="fill:none" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-C LE-t0" id="L-C-t0-0" d="M227.152,175.391L227.152,181.29C227.152,187.19,227.152,198.99,227.152,209.906C227.152,220.822,227.152,230.855,227.152,235.871L227.152,240.888"></path></g><g class="edgeLabels"><g transform="translate(125.40234375, 104.1953125)" class="edgeLabel"><g transform="translate(-16, -10.3984375)" class="label"><foreignObject height="20.796875" width="32"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="edgeLabel">输入</span></div></foreignObject></g></g><g transform="translate(328.90234375, 104.1953125)" class="edgeLabel"><g transform="translate(-16, -10.3984375)" class="label"><foreignObject height="20.796875" width="32"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="edgeLabel">输入</span></div></foreignObject></g></g><g transform="translate(227.15234375, 210.7890625)" class="edgeLabel"><g transform="translate(-16, -10.3984375)" class="label"><foreignObject height="20.796875" width="32"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="edgeLabel">输出</span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(227.15234375, 264.0859375)" id="flowchart-t0-6" class="node default default flowchart-label"><rect height="35.796875" width="96.890625" y="-17.8984375" x="-48.4453125" ry="5" rx="5" class="basic label-container"></rect><g transform="translate(-40.9453125, -10.3984375)" class="label"><rect></rect><foreignObject height="20.796875" width="81.890625"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">C.Compile()</span></div></foreignObject></g></g><g transform="translate(125.40234375, 50.8984375)" id="flowchart-A-0" class="node default default flowchart-label"><rect height="35.796875" width="153.21875" y="-17.8984375" x="-76.609375" ry="5" rx="5" class="basic label-container"></rect><g transform="translate(-69.109375, -10.3984375)" class="label"><rect></rect><foreignObject height="20.796875" width="138.21875"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">FExpressionInput A</span></div></foreignObject></g></g><g transform="translate(227.15234375, 157.4921875)" id="flowchart-C-2" class="node default default flowchart-label"><rect height="35.796875" width="176.390625" y="-17.8984375" x="-88.1953125" ry="5" rx="5" class="basic label-container"></rect><g transform="translate(-80.6953125, -10.3984375)" class="label"><rect></rect><foreignObject height="20.796875" width="161.390625"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">UMaterialExpression C</span></div></foreignObject></g></g><g transform="translate(328.90234375, 50.8984375)" id="flowchart-B-1" class="node default default flowchart-label"><rect height="35.796875" width="153.78125" y="-17.8984375" x="-76.890625" ry="5" rx="5" class="basic label-container"></rect><g transform="translate(-69.390625, -10.3984375)" class="label"><rect></rect><foreignObject height="20.796875" width="138.78125"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">FExpressionInput B</span></div></foreignObject></g></g></g></g></g></g></g></svg></div></div><div><p dir="auto">上图中*.Compile()进行的“运算”是调用了<em>FMaterialCompiler</em>类中提供的函数进行“运算”，例如一个Add节点就是调用了<em>FMaterialCompiler::Add()</em>函数。 之所以给“运算”打上引号，是因为这些运算函数并不会进行实际的运算，<em>FMaterialCompiler::Add()</em>等函数会将此运算生成实际的HLSL代码，例如Add运算的代码即为<em>"(%s + %s)"</em>。</p></div></div></div><div class="heading-wrapper"><h3 data-heading="编译器-->Compiler" dir="auto" class="heading" id="编译器-->Compiler"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>编译器--&gt;Compiler<div class="heading-after">...</div></h3><div class="heading-children"><div class="heading-wrapper"><h4 data-heading="插入代码片段 AddCodeChunk" dir="auto" class="heading" id="插入代码片段_AddCodeChunk"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>插入代码片段 AddCodeChunk<div class="heading-after">...</div></h4><div class="heading-children"><div><p dir="auto">上面说到，一个Add表达式是调用了<em>FMaterialCompiler.Add()</em>函数生成了HLSL代码<em>"(%s + %s)"</em>，这代码片段需要插入到整个材质的HLSL代码中才能，。 翻译材质节点时，使用<em>FMaterialCompiler</em>的子类<em>FHLSLMaterialTranslator</em>进行编译，因此实际上是调用的<em>FHLSLMaterialTranslator::Add()</em>函数，这个函数会调用<em>FHLSLMaterialTranslator::AddCodeChunkInner()</em>函数，将代码片段(Code Chunk)"(A + B)"加入到<em>TArray&lt;FShaderCodeChunk&gt;</em>类型的<em>FHLSLMaterialTranslator::CurrentScopeChunks</em>成员中。 代码片段有inline和非inline的插入方式，inline方式就直接在目前代码片段末尾插入，非inline方式则需要另起一行并分配一个中间变量保存计算结果。下面是非inline方式生成代码的代码，看着有点难绷。 甚至缩进都是手打的(。</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded"><span class="token comment">// Allocate a local variable name  </span>
<span class="token keyword">const</span> FString SymbolName <span class="token operator">=</span> <span class="token function">CreateSymbolName</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"Local"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token comment">// Construct the definition string which stores the result in a temporary and adds a newline for readability  </span>
<span class="token keyword">const</span> FString LocalVariableDefinition <span class="token operator">=</span> <span class="token function">FString</span><span class="token punctuation">(</span><span class="token string">"   "</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">HLSLTypeString</span><span class="token punctuation">(</span>Type<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span> <span class="token operator">+</span> SymbolName <span class="token operator">+</span> <span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">" = "</span><span class="token punctuation">)</span> <span class="token operator">+</span> FormattedCode <span class="token operator">+</span> <span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">";"</span><span class="token punctuation">)</span> <span class="token operator">+</span> LINE_TERMINATOR<span class="token punctuation">;</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">值得一提的是，加减乘除等基础运算都是非inline的插入方式，推测是因为要处理运算符的优先级和括号匹配比较麻烦，因此就直接单独处理了；Component Mask则是典型的inline。 此函数返回的是插入代码片段的index，可以通过这个index访问<em>FHLSLMaterialTranslator::TArray&lt;FShaderCodeChun&gt;* CurrentScopeChunks</em></p></div></div></div><div class="heading-wrapper"><h4 data-heading="编译上游表达式 CallExpression" dir="auto" class="heading" id="编译上游表达式_CallExpression"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>编译上游表达式 CallExpression<div class="heading-after">...</div></h4><div class="heading-children"><div><p dir="auto">前面说到，表达式输入<em>FExpressionInput</em>的Compile函数会调用编译器的<em>CallExpression</em>函数，获取到其直接上游节点的结果，这部分就来详细说明这一过程。</p></div><div><div class="mermaid" dir="auto"><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-8 -8 549.171875 830.171875" height="830.171875" xmlns="http://www.w3.org/2000/svg" id="mermaid-34994ae08ad270f4-19" style="width:549.172px;max-width:100%"><style>#mermaid-34994ae08ad270f4-19{font-family:var(--font-mermaid);font-size:16px;fill:var(--text-normal)}#mermaid-34994ae08ad270f4-19 .error-icon{fill:var(--background-primary)}#mermaid-34994ae08ad270f4-19 .error-text{fill:var(--text-error);stroke:var(--text-error)}#mermaid-34994ae08ad270f4-19 .edge-thickness-normal{stroke-width:2px}#mermaid-34994ae08ad270f4-19 .edge-thickness-thick{stroke-width:3.5px}#mermaid-34994ae08ad270f4-19 .edge-pattern-solid{stroke-dasharray:0}#mermaid-34994ae08ad270f4-19 .edge-pattern-dashed{stroke-dasharray:3}#mermaid-34994ae08ad270f4-19 .edge-pattern-dotted{stroke-dasharray:2}#mermaid-34994ae08ad270f4-19 .marker{fill:var(--text-normal);stroke:var(--text-normal)}#mermaid-34994ae08ad270f4-19 .marker.cross{stroke:var(--text-normal)}#mermaid-34994ae08ad270f4-19 svg{font-family:var(--font-mermaid);font-size:16px}#mermaid-34994ae08ad270f4-19 .label{font-family:var(--font-mermaid);color:var(--text-normal)}#mermaid-34994ae08ad270f4-19 .cluster-label text{fill:var(--text-normal)}#mermaid-34994ae08ad270f4-19 .cluster-label span,#mermaid-34994ae08ad270f4-19 p{color:var(--text-normal)}#mermaid-34994ae08ad270f4-19 .label text,#mermaid-34994ae08ad270f4-19 p,#mermaid-34994ae08ad270f4-19 span{fill:var(--text-normal);color:var(--text-normal)}#mermaid-34994ae08ad270f4-19 .node circle,#mermaid-34994ae08ad270f4-19 .node ellipse,#mermaid-34994ae08ad270f4-19 .node path,#mermaid-34994ae08ad270f4-19 .node polygon,#mermaid-34994ae08ad270f4-19 .node rect{fill:var(--background-primary);stroke:var(--text-muted);stroke-width:1px}#mermaid-34994ae08ad270f4-19 .flowchart-label text{text-anchor:middle}#mermaid-34994ae08ad270f4-19 .node .label{text-align:center}#mermaid-34994ae08ad270f4-19 .node.clickable{cursor:pointer}#mermaid-34994ae08ad270f4-19 .arrowheadPath{fill:#0b0b0b}#mermaid-34994ae08ad270f4-19 .edgePath .path{stroke:var(--text-normal);stroke-width:2px}#mermaid-34994ae08ad270f4-19 .flowchart-link{stroke:var(--text-normal);fill:none}#mermaid-34994ae08ad270f4-19 .edgeLabel{background-color:var(--background-secondary);text-align:center}#mermaid-34994ae08ad270f4-19 .edgeLabel rect{opacity:.5;background-color:var(--background-secondary);fill:var(--background-secondary)}#mermaid-34994ae08ad270f4-19 .labelBkg{background-color:var(--background-secondary)}#mermaid-34994ae08ad270f4-19 .cluster rect{fill:hsl(220.5882352941,100%,98.3333333333%);stroke:hsl(220.5882352941,60%,88.3333333333%);stroke-width:1px}#mermaid-34994ae08ad270f4-19 .cluster text{fill:var(--text-normal)}#mermaid-34994ae08ad270f4-19 .cluster span,#mermaid-34994ae08ad270f4-19 p{color:var(--text-normal)}#mermaid-34994ae08ad270f4-19 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:var(--font-mermaid);font-size:12px;background:var(--background-secondary-alt);border:1px solid hsl(220.5882352941,60%,88.3333333333%);border-radius:2px;pointer-events:none;z-index:100}#mermaid-34994ae08ad270f4-19 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:var(--text-normal)}#mermaid-34994ae08ad270f4-19 foreignObject{overflow:visible}#mermaid-34994ae08ad270f4-19 #arrowhead,#mermaid-34994ae08ad270f4-19 #sequencenumber,#mermaid-34994ae08ad270f4-19 .cluster text,#mermaid-34994ae08ad270f4-19 .label text,#mermaid-34994ae08ad270f4-19 text,#mermaid-34994ae08ad270f4-19 text.actor{fill:var(--text-normal)}#mermaid-34994ae08ad270f4-19 line{stroke:var(--text-normal)}#mermaid-34994ae08ad270f4-19 .label rect{display:none}#mermaid-34994ae08ad270f4-19 .cluster rect{stroke-width:1px}#mermaid-34994ae08ad270f4-19 .node circle,#mermaid-34994ae08ad270f4-19 .node ellipse,#mermaid-34994ae08ad270f4-19 .node path,#mermaid-34994ae08ad270f4-19 .node polygon,#mermaid-34994ae08ad270f4-19 .node rect{fill:var(--background-secondary-alt);stroke:var(--background-modifier-border);stroke-width:1px}#mermaid-34994ae08ad270f4-19 .node .label{text-align:center}#mermaid-34994ae08ad270f4-19 .node.clickable{cursor:pointer}#mermaid-34994ae08ad270f4-19 .arrowheadPath{fill:var(--text-muted)}#mermaid-34994ae08ad270f4-19 .edgePath .path{stroke:var(--text-muted);stroke-width:1.5px}#mermaid-34994ae08ad270f4-19 .edgeLabel{background-color:var(--background-primary);text-align:center}#mermaid-34994ae08ad270f4-19 .cluster rect{fill:var(--background-primary-alt);stroke:var(--background-modifier-border)}#mermaid-34994ae08ad270f4-19 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-size:12px;background:var(--background-secondary);border:1px solid var(--interactive-accent);border-radius:2px;pointer-events:none;z-index:100}#mermaid-34994ae08ad270f4-19 .actor{stroke:var(--background-modifier-border);fill:var(--background-secondary-alt);font-family:inherit!important}#mermaid-34994ae08ad270f4-19 text.actor{stroke:none}#mermaid-34994ae08ad270f4-19 .actor-line{stroke:var(--text-muted)}#mermaid-34994ae08ad270f4-19 .messageLine0,#mermaid-34994ae08ad270f4-19 .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:var(--text-normal)}#mermaid-34994ae08ad270f4-19 #crosshead path{fill:var(--text-normal)!important;stroke:var(--text-normal)!important}#mermaid-34994ae08ad270f4-19 .messageText{fill:var(--text-normal);stroke:none;font-family:inherit!important}#mermaid-34994ae08ad270f4-19 .labelBox{stroke:var(--background-modifier-border);fill:var(--background-secondary-alt)}#mermaid-34994ae08ad270f4-19 .labelText,#mermaid-34994ae08ad270f4-19 .loopText{fill:var(--text-normal);stroke:none}#mermaid-34994ae08ad270f4-19 .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:var(--background-modifier-border)}#mermaid-34994ae08ad270f4-19 .activation0,#mermaid-34994ae08ad270f4-19 .activation1,#mermaid-34994ae08ad270f4-19 .activation2{fill:var(--background-secondary) stroke:var(--text-muted)}#mermaid-34994ae08ad270f4-19 .section{stroke:none;opacity:.2}#mermaid-34994ae08ad270f4-19 .section0,#mermaid-34994ae08ad270f4-19 .section2{fill:var(--text-accent)}#mermaid-34994ae08ad270f4-19 .section1,#mermaid-34994ae08ad270f4-19 .section3{fill:#fff;opacity:.2}#mermaid-34994ae08ad270f4-19 .sectionTitle0,#mermaid-34994ae08ad270f4-19 .sectionTitle1,#mermaid-34994ae08ad270f4-19 .sectionTitle2,#mermaid-34994ae08ad270f4-19 .sectionTitle3{fill:var(--text-normal)}#mermaid-34994ae08ad270f4-19 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px}#mermaid-34994ae08ad270f4-19 .grid .tick{stroke:var(--background-primary-alt);opacity:.8;shape-rendering:crispEdges}#mermaid-34994ae08ad270f4-19 .grid path{stroke-width:0}#mermaid-34994ae08ad270f4-19 .today{fill:none;stroke:#d42;stroke-width:2px}#mermaid-34994ae08ad270f4-19 .task{stroke-width:2}#mermaid-34994ae08ad270f4-19 .taskText{text-anchor:middle}#mermaid-34994ae08ad270f4-19 .taskText:not([font-size]){font-size:11px}#mermaid-34994ae08ad270f4-19 .taskTextOutsideRight{fill:var(--text-normal);text-anchor:start;font-size:11px}#mermaid-34994ae08ad270f4-19 .taskTextOutsideLeft{fill:var(--text-normal);text-anchor:end;font-size:11px}#mermaid-34994ae08ad270f4-19 .task.clickable,#mermaid-34994ae08ad270f4-19 g.clickable{cursor:pointer}#mermaid-34994ae08ad270f4-19 .taskText.clickable,#mermaid-34994ae08ad270f4-19 .taskTextOutsideLeft.clickable,#mermaid-34994ae08ad270f4-19 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163!important;font-weight:700}#mermaid-34994ae08ad270f4-19 .taskText0,#mermaid-34994ae08ad270f4-19 .taskText1,#mermaid-34994ae08ad270f4-19 .taskText2,#mermaid-34994ae08ad270f4-19 .taskText3{fill:#fff}#mermaid-34994ae08ad270f4-19 .task0,#mermaid-34994ae08ad270f4-19 .task1,#mermaid-34994ae08ad270f4-19 .task2,#mermaid-34994ae08ad270f4-19 .task3{fill:var(--interactive-accent);stroke:var(--interactive-accent)}#mermaid-34994ae08ad270f4-19 .taskTextOutside0,#mermaid-34994ae08ad270f4-19 .taskTextOutside1,#mermaid-34994ae08ad270f4-19 .taskTextOutside2,#mermaid-34994ae08ad270f4-19 .taskTextOutside3{fill:var(--text-normal)}#mermaid-34994ae08ad270f4-19 .active0,#mermaid-34994ae08ad270f4-19 .active1,#mermaid-34994ae08ad270f4-19 .active2,#mermaid-34994ae08ad270f4-19 .active3,#mermaid-34994ae08ad270f4-19 g.classGroup rect,#mermaid-34994ae08ad270f4-19 g.stateGroup rect{fill:var(--background-primary-alt);stroke:var(--background-modifier-border)}#mermaid-34994ae08ad270f4-19 g.classGroup rect,#mermaid-34994ae08ad270f4-19 g.stateGroup rect{stroke:var(--background-modifier-border)}#mermaid-34994ae08ad270f4-19 .activeText0,#mermaid-34994ae08ad270f4-19 .activeText1,#mermaid-34994ae08ad270f4-19 .activeText2,#mermaid-34994ae08ad270f4-19 .activeText3{fill:var(--text-normal)!important}#mermaid-34994ae08ad270f4-19 .done0,#mermaid-34994ae08ad270f4-19 .done1,#mermaid-34994ae08ad270f4-19 .done2,#mermaid-34994ae08ad270f4-19 .done3{stroke:var(--text-muted);fill:#bbb;stroke-width:2}#mermaid-34994ae08ad270f4-19 .doneText0,#mermaid-34994ae08ad270f4-19 .doneText1,#mermaid-34994ae08ad270f4-19 .doneText2,#mermaid-34994ae08ad270f4-19 .doneText3{fill:var(--text-normal)!important}#mermaid-34994ae08ad270f4-19 .crit0,#mermaid-34994ae08ad270f4-19 .crit1,#mermaid-34994ae08ad270f4-19 .crit2,#mermaid-34994ae08ad270f4-19 .crit3{stroke:#b1361b;fill:#d42;stroke-width:2}#mermaid-34994ae08ad270f4-19 .activeCrit0,#mermaid-34994ae08ad270f4-19 .activeCrit1,#mermaid-34994ae08ad270f4-19 .activeCrit2,#mermaid-34994ae08ad270f4-19 .activeCrit3,#mermaid-34994ae08ad270f4-19 .classLabel .box{stroke:#b1361b;fill:var(--background-secondary-alt);stroke-width:2}#mermaid-34994ae08ad270f4-19 .classLabel .box{stroke:none;stroke-width:0;opacity:.5}#mermaid-34994ae08ad270f4-19 .doneCrit0,#mermaid-34994ae08ad270f4-19 .doneCrit1,#mermaid-34994ae08ad270f4-19 .doneCrit2,#mermaid-34994ae08ad270f4-19 .doneCrit3{stroke:#b1361b;fill:#bbb;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}#mermaid-34994ae08ad270f4-19 .milestone{transform:rotate(45deg) scale(.8,.8)}#mermaid-34994ae08ad270f4-19 .milestoneText{font-style:italic}#mermaid-34994ae08ad270f4-19 .activeCritText0,#mermaid-34994ae08ad270f4-19 .activeCritText1,#mermaid-34994ae08ad270f4-19 .activeCritText2,#mermaid-34994ae08ad270f4-19 .activeCritText3,#mermaid-34994ae08ad270f4-19 .doneCritText0,#mermaid-34994ae08ad270f4-19 .doneCritText1,#mermaid-34994ae08ad270f4-19 .doneCritText2,#mermaid-34994ae08ad270f4-19 .doneCritText3{fill:var(--text-normal)!important}#mermaid-34994ae08ad270f4-19 .titleText{text-anchor:middle;font-size:18px;fill:var(--text-normal)}#mermaid-34994ae08ad270f4-19 g.classGroup text{fill:var(--text-normal);stroke:none;font-size:11px}#mermaid-34994ae08ad270f4-19 g.classGroup text .title{font-weight:bolder}#mermaid-34994ae08ad270f4-19 #aggregationEnd,#mermaid-34994ae08ad270f4-19 #aggregationStart,#mermaid-34994ae08ad270f4-19 #compositionEnd,#mermaid-34994ae08ad270f4-19 #compositionStart,#mermaid-34994ae08ad270f4-19 g.classGroup line,#mermaid-34994ae08ad270f4-19 g.stateGroup line{stroke:var(--background-modifier-border);stroke-width:1}#mermaid-34994ae08ad270f4-19 .classLabel .label{font-size:11px}#mermaid-34994ae08ad270f4-19 .relation{fill:none}#mermaid-34994ae08ad270f4-19 .dashed-line{stroke-dasharray:3}#mermaid-34994ae08ad270f4-19 #compositionEnd,#mermaid-34994ae08ad270f4-19 #compositionStart{fill:var(--background-modifier-border)}#mermaid-34994ae08ad270f4-19 #aggregationEnd,#mermaid-34994ae08ad270f4-19 #aggregationStart{fill:var(--background-secondary-alt)}#mermaid-34994ae08ad270f4-19 #dependencyEnd,#mermaid-34994ae08ad270f4-19 #dependencyStart,#mermaid-34994ae08ad270f4-19 #extensionEnd,#mermaid-34994ae08ad270f4-19 #extensionStart{fill:var(--background-modifier-border);stroke:var(--background-modifier-border);stroke-width:1}#mermaid-34994ae08ad270f4-19 .branch-label,#mermaid-34994ae08ad270f4-19 .commit-id,#mermaid-34994ae08ad270f4-19 .commit-msg{fill:#d3d3d3;color:#d3d3d3}#mermaid-34994ae08ad270f4-19 .pieTitleText{text-anchor:middle;font-size:25px;fill:var(--text-normal)}#mermaid-34994ae08ad270f4-19 .state-note text,#mermaid-34994ae08ad270f4-19 g.stateGroup text{stroke:none;font-size:10px}#mermaid-34994ae08ad270f4-19 g.stateGroup .state-title{font-weight:bolder;fill:var(--text-normal)}#mermaid-34994ae08ad270f4-19 .stateGroup .composit{fill:#fff;border-bottom:1px}#mermaid-34994ae08ad270f4-19 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px}#mermaid-34994ae08ad270f4-19 .state-note{stroke:#645c10;fill:#f3edb3}#mermaid-34994ae08ad270f4-19 .state-note text{fill:#000}#mermaid-34994ae08ad270f4-19 .stateLabel .box{stroke:none;stroke-width:0;fill:var(--background-secondary-alt);opacity:.5}#mermaid-34994ae08ad270f4-19 .stateLabel text{fill:var(--text-normal);font-size:10px;font-weight:700}#mermaid-34994ae08ad270f4-19 .node circle.state-start{fill:var(--text-normal);stroke:var(--text-normal)}#mermaid-34994ae08ad270f4-19 .node circle.state-end{stroke:var(--background-primary);stroke-width:2}#mermaid-34994ae08ad270f4-19 #statediagram-barbEnd,#mermaid-34994ae08ad270f4-19 g.stateGroup text{fill:var(--background-modifier-border)}#mermaid-34994ae08ad270f4-19 .statediagram-cluster rect{stroke-width:1px}#mermaid-34994ae08ad270f4-19 .statediagram-cluster rect,#mermaid-34994ae08ad270f4-19 .statediagram-state .divider{stroke:var(--background-modifier-border)}#mermaid-34994ae08ad270f4-19 .statediagram-cluster rect .inner{fill:var(--background-secondary-alt)}#mermaid-34994ae08ad270f4-19 .statediagram-cluster.statediagram-cluster-alt .inner{fill:var(--background-secondary)}#mermaid-34994ae08ad270f4-19 .cluster-label text,#mermaid-34994ae08ad270f4-19 .node circle.state-end{fill:var(--text-normal)}#mermaid-34994ae08ad270f4-19 .statediagram-state rect.divider{stroke-dasharray:10,10;fill:var(--background-secondary)}#mermaid-34994ae08ad270f4-19 .note-edge{stroke-dasharray:5}#mermaid-34994ae08ad270f4-19 .statediagram-note rect{fill:#f3edb3;stroke:#645c10;stroke-width:1px}#mermaid-34994ae08ad270f4-19 .error-icon{fill:var(--background-modifier-error)}#mermaid-34994ae08ad270f4-19 .error-text{fill:var(--text-error);stroke:var(--text-error)}#mermaid-34994ae08ad270f4-19 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif}</style><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="6" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-34994ae08ad270f4-19_flowchart-pointEnd"><path style="stroke-width:1;stroke-dasharray:1,0" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-34994ae08ad270f4-19_flowchart-pointStart"><path style="stroke-width:1;stroke-dasharray:1,0" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-34994ae08ad270f4-19_flowchart-circleEnd"><circle style="stroke-width:1;stroke-dasharray:1,0" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="mermaid-34994ae08ad270f4-19_flowchart-circleStart"><circle style="stroke-width:1;stroke-dasharray:1,0" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="mermaid-34994ae08ad270f4-19_flowchart-crossEnd"><path style="stroke-width:2;stroke-dasharray:1,0" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="mermaid-34994ae08ad270f4-19_flowchart-crossStart"><path style="stroke-width:2;stroke-dasharray:1,0" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-34994ae08ad270f4-19_flowchart-pointEnd)" style="fill:none" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-t LE-t0" id="L-t-t0-0" d="M321.633,35.797L321.633,39.964C321.633,44.13,321.633,52.464,321.699,59.997C321.765,67.531,321.897,74.264,321.963,77.631L322.029,80.998"></path><path marker-end="url(#mermaid-34994ae08ad270f4-19_flowchart-pointEnd)" style="fill:none" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-t0 LE-t2" id="L-t0-t2-0" d="M296.375,191.336L289.669,201.445C282.962,211.555,269.549,231.773,262.843,246.899C256.137,262.025,256.137,272.058,256.137,277.074L256.137,282.091"></path><path marker-end="url(#mermaid-34994ae08ad270f4-19_flowchart-pointEnd)" style="fill:none" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-t2 LE-t3" id="L-t2-t3-0" d="M256.137,323.188L256.137,327.354C256.137,331.521,256.137,339.854,256.203,347.388C256.269,354.921,256.401,361.655,256.467,365.022L256.533,368.389"></path><path marker-end="url(#mermaid-34994ae08ad270f4-19_flowchart-pointEnd)" style="fill:none" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-t3 LE-t4" id="L-t3-t4-0" d="M213.139,492.987L197.965,506.053C182.791,519.119,152.442,545.251,137.268,563.333C122.094,581.416,122.094,591.448,122.094,596.465L122.094,601.481"></path><path marker-end="url(#mermaid-34994ae08ad270f4-19_flowchart-pointEnd)" style="fill:none" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-t3 LE-t5" id="L-t3-t5-0" d="M300.134,492.987L315.142,506.053C330.149,519.119,360.165,545.251,375.172,563.333C390.18,581.416,390.18,591.448,390.18,596.465L390.18,601.481"></path><path marker-end="url(#mermaid-34994ae08ad270f4-19_flowchart-pointEnd)" style="fill:none" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-t4 LE-t1" id="L-t4-t1-0" d="M122.094,642.578L122.094,646.745C122.094,650.911,122.094,659.245,156.653,668.941C191.211,678.638,260.329,689.698,294.888,695.228L329.446,700.758"></path><path marker-end="url(#mermaid-34994ae08ad270f4-19_flowchart-pointEnd)" style="fill:none" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-t5 LE-t1" id="L-t5-t1-0" d="M390.18,642.578L390.18,646.745C390.18,650.911,390.18,659.245,390.18,666.695C390.18,674.145,390.18,680.711,390.18,683.995L390.18,687.278"></path><path marker-end="url(#mermaid-34994ae08ad270f4-19_flowchart-pointEnd)" style="fill:none" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-t0 LE-t1" id="L-t0-t1-0" d="M365.583,173.644L391.514,186.702C417.446,199.76,469.309,225.876,495.24,247.817C521.172,269.758,521.172,287.523,521.172,303.556C521.172,319.589,521.172,333.888,521.172,358.771C521.172,383.654,521.172,419.12,521.172,456.319C521.172,493.518,521.172,532.451,521.172,560.799C521.172,589.148,521.172,606.914,521.172,622.947C521.172,638.979,521.172,653.279,509.288,664.32C497.405,675.362,473.637,683.145,461.754,687.037L449.87,690.929"></path><path marker-end="url(#mermaid-34994ae08ad270f4-19_flowchart-pointEnd)" style="fill:none" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-t1 LE-e" id="L-t1-e-0" d="M390.18,728.375L390.18,732.542C390.18,736.708,390.18,745.042,390.18,752.492C390.18,759.942,390.18,766.508,390.18,769.792L390.18,773.075"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(256.13671875, 251.9921875)" class="edgeLabel"><g transform="translate(-9.3671875, -10.3984375)" class="label"><foreignObject height="20.796875" width="18.734375"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="edgeLabel">no</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(122.09375, 571.3828125)" class="edgeLabel"><g transform="translate(-12, -10.3984375)" class="label"><foreignObject height="20.796875" width="24"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="edgeLabel">yes</span></div></foreignObject></g></g><g transform="translate(390.1796875, 571.3828125)" class="edgeLabel"><g transform="translate(-9.3671875, -10.3984375)" class="label"><foreignObject height="20.796875" width="18.734375"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="edgeLabel">no</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(521.171875, 454.5859375)" class="edgeLabel"><g transform="translate(-12, -10.3984375)" class="label"><foreignObject height="20.796875" width="24"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="edgeLabel">yes</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(390.1796875, 796.2734375)" id="flowchart-e-14" class="node default default flowchart-label"><rect height="35.796875" width="47" y="-17.8984375" x="-23.5" ry="0" rx="0" class="basic label-container"></rect><g transform="translate(-16, -10.3984375)" class="label"><rect></rect><foreignObject height="20.796875" width="32"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">结束</span></div></foreignObject></g></g><g transform="translate(321.6328125, 17.8984375)" id="flowchart-t-15" class="node default default flowchart-label"><rect height="35.796875" width="93.265625" y="-17.8984375" x="-46.6328125" ry="5" rx="5" class="basic label-container"></rect><g transform="translate(-39.1328125, -10.3984375)" class="label"><rect></rect><foreignObject height="20.796875" width="78.265625"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">Expression</span></div></foreignObject></g></g><g transform="translate(321.6328125, 151.1953125)" id="flowchart-t0-16" class="node default default flowchart-label"><polygon transform="translate(-65.3984375,65.3984375)" class="label-container" points="65.3984375,0 130.796875,-65.3984375 65.3984375,-130.796875 0,-65.3984375"></polygon><g transform="translate(-40, -10.3984375)" class="label"><rect></rect><foreignObject height="20.796875" width="80"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">是否已编译</span></div></foreignObject></g></g><g transform="translate(256.13671875, 305.2890625)" id="flowchart-t2-18" class="node default default flowchart-label"><rect height="35.796875" width="164.1875" y="-17.8984375" x="-82.09375" ry="5" rx="5" class="basic label-container"></rect><g transform="translate(-74.59375, -10.3984375)" class="label"><rect></rect><foreignObject height="20.796875" width="149.1875"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">压入ExpressionStack</span></div></foreignObject></g></g><g transform="translate(256.13671875, 454.5859375)" id="flowchart-t3-20" class="node default default flowchart-label"><polygon transform="translate(-81.3984375,81.3984375)" class="label-container" points="81.3984375,0 162.796875,-81.3984375 81.3984375,-162.796875 0,-81.3984375"></polygon><g transform="translate(-56, -10.3984375)" class="label"><rect></rect><foreignObject height="20.796875" width="112"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">是否为材质函数</span></div></foreignObject></g></g><g transform="translate(122.09375, 624.6796875)" id="flowchart-t4-22" class="node default default flowchart-label"><rect height="35.796875" width="244.1875" y="-17.8984375" x="-122.09375" ry="5" rx="5" class="basic label-container"></rect><g transform="translate(-114.59375, -10.3984375)" class="label"><rect></rect><foreignObject height="20.796875" width="229.1875"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">压入材质函数的ExpressionStack</span></div></foreignObject></g></g><g transform="translate(390.1796875, 624.6796875)" id="flowchart-t5-24" class="node default default flowchart-label"><rect height="35.796875" width="191.984375" y="-17.8984375" x="-95.9921875" ry="5" rx="5" class="basic label-container"></rect><g transform="translate(-88.4921875, -10.3984375)" class="label"><rect></rect><foreignObject height="20.796875" width="176.984375"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">调用Expression::Compile</span></div></foreignObject></g></g><g transform="translate(390.1796875, 710.4765625)" id="flowchart-t1-27" class="node default default flowchart-label"><rect height="35.796875" width="111" y="-17.8984375" x="-55.5" ry="5" rx="5" class="basic label-container"></rect><g transform="translate(-48, -10.3984375)" class="label"><rect></rect><foreignObject height="20.796875" width="96"><div style="display:inline-block;white-space:nowrap" xmlns="http://www.w3.org/1999/xhtml" dir="auto"><span class="nodeLabel">使用编译结果</span></div></foreignObject></g></g></g></g></g></svg></div></div><div><p dir="auto">上面的图表是简化后的过程，实际上还会检查是否被重入。 整个材质编译过程还是比较简单清晰的。</p></div></div></div><div class="heading-wrapper"><h4 data-heading="编译流程" dir="auto" class="heading" id="编译流程"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>编译流程<div class="heading-after">...</div></h4><div class="heading-children"><div><p dir="auto"><em>HLSLMaterialTranslator</em>使用<em>FHLSLMaterialTranslator::Translate()</em>函数将材质节点生成HLSL代码。 UE4会将材质编译成HLSL代码，其实可以在材质编辑器的<em>window-&gt;Shader Code-&gt;HLSL Code</em>查看。</p></div><div class="heading-wrapper"><h5 data-heading="CustomOutputs" dir="auto" class="heading" id="CustomOutputs"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>CustomOutputs<div class="heading-after">...</div></h5><div class="heading-children"><div><p dir="auto">CustomOutputs我感觉就相当于自定义的Shading Model的材质节点，例如<em>UMaterialExpressionClearCoatNormalCustomOutput</em>就是清漆材质的自定义Shading Model。因此如果想要自定义一个Shading Model，则需要创建一个继承自<em>UMaterialExpressionCustomOutput</em>的类。<a data-tooltip-position="top" aria-label="https://zhuanlan.zhihu.com/p/613312982" rel="noopener" class="external-link" href="https://zhuanlan.zhihu.com/p/613312982" target="_blank">此文章</a>有详细讲解如何创建一个自定义的ToonShading。 在材质翻译过程中，会收集材质所使用到的CustomOutput然后先编译好。</p></div></div></div><div class="heading-wrapper"><h5 data-heading="编译法线" dir="auto" class="heading" id="编译法线"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>编译法线<div class="heading-after">...</div></h5><div class="heading-children"><div><p dir="auto">Translator首先会将法线进行变换，以下是源码中的一段注释，因为PixelNormal有可能会被其他节点用到，例如我想沿法线进行WPO，所以需要我们在Shader一开始先进行法线的计算。</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded"><span class="token comment">// Generate code:  </span>
<span class="token comment">// Normally one would expect the generator to emit something like  </span>
<span class="token comment">//     float Local0 = ...  </span>
<span class="token comment">//     ...  </span>
<span class="token comment">//     float Local3= ...  </span>
<span class="token comment">//     ...  </span>
<span class="token comment">//     float Localn= ...  </span>
<span class="token comment">//     PixelMaterialInputs.EmissiveColor = Local0 + ...  </span>
<span class="token comment">//     PixelMaterialInputs.Normal = Local3 * ...  </span>
<span class="token comment">// However because the Normal can be used in the middle of generating other Locals (which happens when using a node like PixelNormalWS)  </span>
<span class="token comment">// instead we generate this:  </span>
<span class="token comment">//     float Local0 = ...  </span>
<span class="token comment">//     ...  </span>
<span class="token comment">//     float Local3= ...  </span>
<span class="token comment">//     PixelMaterialInputs.Normal = Local3 * ...  </span>
<span class="token comment">//     ...  </span>
<span class="token comment">//     float Localn= ...  </span>
<span class="token comment">//     PixelMaterialInputs.EmissiveColor = Local0 + ...  </span>
<span class="token comment">// in other words, compile Normal first, then emit all the expressions up to the last one Normal requires;  </span>
<span class="token comment">// assign the normal into the shared struct, then emit the remaining expressions; finally assign the rest of the shared struct inputs.  </span>
<span class="token comment">// Inputs that are not shared, have false in the SharedPixelProperties array, and those ones will emit the full code.</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">使用如下代码先对法线属性进行编译。</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded">Chunk<span class="token punctuation">[</span>MP_Normal<span class="token punctuation">]</span> <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_Normal<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto"><em>CompilePropertyAndSetMaterialProperty</em>这个函数是<em>FMaterial</em>的一个成员函数，用于编译材质的输入属性。然而实际上<em>CompilePropertyAndSetMaterialProperty</em>函数会先调用编译器的<em>SetMaterialProperty</em>函数以设置编译器的当前<em>ShaderFrequency</em>，<em>ShaderFrequency</em>相当于着色器阶段，包含顶点、计算、像素、几何等着色器。 然后调用<em>UMaterialInterface::CompileProperty</em>，因为<em>UMaterial</em>是继承自<em>UMaterialInterface</em>，因此实际上是调用了<em>UMaterial::CompileProperty</em>。 我们看看<em>UMaterial::CompileProperty</em>的实现代码：</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded">int32 <span class="token class-name">UMaterial</span><span class="token double-colon punctuation">::</span><span class="token function">CompilePropertyEx</span><span class="token punctuation">(</span> FMaterialCompiler<span class="token operator">*</span> Compiler<span class="token punctuation">,</span> <span class="token keyword">const</span> FGuid<span class="token operator">&amp;</span> AttributeID <span class="token punctuation">)</span>  
<span class="token punctuation">{</span>  
    <span class="token keyword">const</span> EMaterialProperty Property <span class="token operator">=</span> <span class="token class-name">FMaterialAttributeDefinitionMap</span><span class="token double-colon punctuation">::</span><span class="token function">GetProperty</span><span class="token punctuation">(</span>AttributeID<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token keyword">if</span><span class="token punctuation">(</span> bUseMaterialAttributes <span class="token operator">&amp;&amp;</span> MP_DiffuseColor <span class="token operator">!=</span> Property <span class="token operator">&amp;&amp;</span> MP_SpecularColor <span class="token operator">!=</span> Property <span class="token punctuation">)</span>  
    <span class="token punctuation">{</span>       <span class="token keyword">return</span> MaterialAttributes<span class="token punctuation">.</span><span class="token function">CompileWithDefault</span><span class="token punctuation">(</span>Compiler<span class="token punctuation">,</span> AttributeID<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>Property<span class="token punctuation">)</span>  
    <span class="token punctuation">{</span>       <span class="token keyword">case</span> MP_Opacity<span class="token operator">:</span>            <span class="token keyword">return</span> Opacity<span class="token punctuation">.</span><span class="token function">CompileWithDefault</span><span class="token punctuation">(</span>Compiler<span class="token punctuation">,</span> Property<span class="token punctuation">)</span><span class="token punctuation">;</span>  
       <span class="token keyword">case</span> MP_OpacityMask<span class="token operator">:</span>         <span class="token keyword">return</span> OpacityMask<span class="token punctuation">.</span><span class="token function">CompileWithDefault</span><span class="token punctuation">(</span>Compiler<span class="token punctuation">,</span> Property<span class="token punctuation">)</span><span class="token punctuation">;</span>  
       <span class="token keyword">case</span> MP_Metallic<span class="token operator">:</span>           <span class="token keyword">return</span> Metallic<span class="token punctuation">.</span><span class="token function">CompileWithDefault</span><span class="token punctuation">(</span>Compiler<span class="token punctuation">,</span> Property<span class="token punctuation">)</span><span class="token punctuation">;</span>  
       <span class="token keyword">case</span> MP_Specular<span class="token operator">:</span>           <span class="token keyword">return</span> Specular<span class="token punctuation">.</span><span class="token function">CompileWithDefault</span><span class="token punctuation">(</span>Compiler<span class="token punctuation">,</span> Property<span class="token punctuation">)</span><span class="token punctuation">;</span>  
       <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
       <span class="token keyword">default</span><span class="token operator">:</span>  
          <span class="token keyword">if</span> <span class="token punctuation">(</span>Property <span class="token operator">&gt;=</span> MP_CustomizedUVs0 <span class="token operator">&amp;&amp;</span> Property <span class="token operator">&lt;=</span> MP_CustomizedUVs7<span class="token punctuation">)</span>  
          <span class="token punctuation">{</span>             <span class="token keyword">const</span> int32 TextureCoordinateIndex <span class="token operator">=</span> Property <span class="token operator">-</span> MP_CustomizedUVs0<span class="token punctuation">;</span>  
  
             <span class="token keyword">if</span> <span class="token punctuation">(</span>CustomizedUVs<span class="token punctuation">[</span>TextureCoordinateIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>Expression <span class="token operator">&amp;&amp;</span> TextureCoordinateIndex <span class="token operator">&lt;</span> NumCustomizedUVs<span class="token punctuation">)</span>  
             <span class="token punctuation">{</span>                <span class="token keyword">return</span> CustomizedUVs<span class="token punctuation">[</span>TextureCoordinateIndex<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">CompileWithDefault</span><span class="token punctuation">(</span>Compiler<span class="token punctuation">,</span> Property<span class="token punctuation">)</span><span class="token punctuation">;</span>  
             <span class="token punctuation">}</span>             <span class="token keyword">else</span>  
             <span class="token punctuation">{</span>  
                <span class="token comment">// The user did not customize this UV, pass through the vertex texture coordinates  </span>
                <span class="token keyword">return</span> Compiler<span class="token operator">-&gt;</span><span class="token function">TextureCoordinate</span><span class="token punctuation">(</span>TextureCoordinateIndex<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
             <span class="token punctuation">}</span>          <span class="token punctuation">}</span>           <span class="token punctuation">}</span>  
  
    <span class="token function">check</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token keyword">return</span> INDEX_NONE<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">可以看到，基本是通过调用<em>FScalarMaterialInput</em>、<em>FColorMaterialInput</em>、<em>FVectorMaterialInput</em>等的<em>CompileWithDefault</em>函数进行的——这些类都是<em>FMaterialInput</em>的模板特化，而<em>FMaterialInput</em>又继承自<em>FExpressionInput</em>，可以说是带模板参数的<em>FExpressionInput</em>，因此和前文提到的<em>FExpressionInput</em>行为一致。<em>CompileWithDefault</em>函数会将属性编译为常量或者调用其<em>FExpressionInput::Compile()</em>函数。读者应该记得，前文说到<em>FExpressionInput::Compile()</em>函数会对其直接上游节点调用CallExpression函数来进行编译，因此这里对法线属性进行<em>CompilePropertyAndSetMaterialProperty</em>就相当于把连接到法线属性的所有节点都进行编译，逻辑闭环了这下。 最后的编译结果返回的是对应属性的Code Index，保存在Chunk[]中。</p></div></div></div><div class="heading-wrapper"><h5 data-heading="编译其他材质属性" dir="auto" class="heading" id="编译其他材质属性"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>编译其他材质属性<div class="heading-after">...</div></h5><div class="heading-children"><div><p dir="auto">按照如下顺序来编译其他属性：</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded">Chunk<span class="token punctuation">[</span>MP_EmissiveColor<span class="token punctuation">]</span>             <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_EmissiveColor       <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
Chunk<span class="token punctuation">[</span>MP_DiffuseColor<span class="token punctuation">]</span>              <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_DiffuseColor        <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
Chunk<span class="token punctuation">[</span>MP_SpecularColor<span class="token punctuation">]</span>             <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_SpecularColor       <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
Chunk<span class="token punctuation">[</span>MP_BaseColor<span class="token punctuation">]</span>                <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_BaseColor          <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
Chunk<span class="token punctuation">[</span>MP_Metallic<span class="token punctuation">]</span>                 <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_Metallic           <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
Chunk<span class="token punctuation">[</span>MP_Specular<span class="token punctuation">]</span>                 <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_Specular           <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
Chunk<span class="token punctuation">[</span>MP_Roughness<span class="token punctuation">]</span>                <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_Roughness          <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
Chunk<span class="token punctuation">[</span>MP_Anisotropy<span class="token punctuation">]</span>                <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_Anisotropy             <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
Chunk<span class="token punctuation">[</span>MP_Opacity<span class="token punctuation">]</span>                  <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_Opacity            <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
Chunk<span class="token punctuation">[</span>MP_OpacityMask<span class="token punctuation">]</span>               <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_OpacityMask         <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
Chunk<span class="token punctuation">[</span>MP_Tangent<span class="token punctuation">]</span>                  <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_Tangent            <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
Chunk<span class="token punctuation">[</span>MP_WorldPositionOffset<span class="token punctuation">]</span>         <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_WorldPositionOffset   <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
Chunk<span class="token punctuation">[</span>MP_WorldDisplacement<span class="token punctuation">]</span>          <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_WorldDisplacement    <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
Chunk<span class="token punctuation">[</span>MP_TessellationMultiplier<span class="token punctuation">]</span>       <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_TessellationMultiplier    <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">执行完后再编译ShadingModel。</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded">Chunk<span class="token punctuation">[</span>MP_ShadingModel<span class="token punctuation">]</span>              <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_ShadingModel        <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">然后FMaterialShadingModelField MaterialShadingModels = Material-&gt;GetShadingModels(); 看代码说，材质的ShadingModel还可以来自材质表达式，如果有材质表达式包含了ShadingModel那么就会使用此ShadingModel。但是没太懂这是个什么情况。</p></div><div><p dir="auto">之后在Volume域下，或者在Surface域&amp;&amp;ShadingModel是SSS时会进行SSS属性的编译。</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded">int32 SubsurfaceColor <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_SubsurfaceColor<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Chunk<span class="token punctuation">[</span>MP_SubsurfaceColor<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">AppendVector</span><span class="token punctuation">(</span>SubsurfaceColor<span class="token punctuation">,</span> CodeSubsurfaceProfile<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">然后编译CustomData和AO。</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded">Chunk<span class="token punctuation">[</span>MP_CustomData0<span class="token punctuation">]</span>               <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_CustomData0      <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
Chunk<span class="token punctuation">[</span>MP_CustomData1<span class="token punctuation">]</span>               <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_CustomData1      <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
Chunk<span class="token punctuation">[</span>MP_AmbientOcclusion<span class="token punctuation">]</span>           <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_AmbientOcclusion  <span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">然后在BlendMode是Translucent或ShadingModel包含SingleLayerWater的时候会编译Refraction。Refraction的值是直接把材质属性中的Refraction和RefractionDepthBias进行append。</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsTranslucentBlendMode</span><span class="token punctuation">(</span>BlendMode<span class="token punctuation">)</span> <span class="token operator">||</span> MaterialShadingModels<span class="token punctuation">.</span><span class="token function">HasShadingModel</span><span class="token punctuation">(</span>MSM_SingleLayerWater<span class="token punctuation">)</span><span class="token punctuation">)</span>  
<span class="token punctuation">{</span>  
    int32 UserRefraction <span class="token operator">=</span> <span class="token function">ForceCast</span><span class="token punctuation">(</span>Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_Refraction<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> MCT_Float1<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    int32 RefractionDepthBias <span class="token operator">=</span> <span class="token function">ForceCast</span><span class="token punctuation">(</span><span class="token function">ScalarParameter</span><span class="token punctuation">(</span><span class="token function">FName</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"RefractionDepthBias"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Material<span class="token operator">-&gt;</span><span class="token function">GetRefractionDepthBiasValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> MCT_Float1<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    Chunk<span class="token punctuation">[</span>MP_Refraction<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">AppendVector</span><span class="token punctuation">(</span>UserRefraction<span class="token punctuation">,</span> RefractionDepthBias<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">然后是WPO和PixelDepthOffset。在此之前已经编译过一次WPO了，不知道这里编译的Previous WPO是啥。</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded"><span class="token keyword">if</span> <span class="token punctuation">(</span>Chunk<span class="token punctuation">[</span>MP_WorldPositionOffset<span class="token punctuation">]</span> <span class="token operator">!=</span> INDEX_NONE<span class="token punctuation">)</span>  
<span class="token punctuation">{</span>  
    <span class="token comment">// Only calculate previous WPO if there is a current WPO  </span>
    Chunk<span class="token punctuation">[</span>CompiledMP_PrevWorldPositionOffset<span class="token punctuation">]</span> <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_WorldPositionOffset<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> SF_Vertex<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
  
Chunk<span class="token punctuation">[</span>MP_PixelDepthOffset<span class="token punctuation">]</span> <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span>MP_PixelDepthOffset<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button">复制</button></pre></div></div></div><div class="heading-wrapper"><h5 data-heading="编译CustomOutputs" dir="auto" class="heading" id="编译CustomOutputs"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>编译CustomOutputs<div class="heading-after">...</div></h5><div class="heading-children"><div><p dir="auto">没搞懂为啥又编一次，略过。</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded"><span class="token punctuation">{</span>  
    <span class="token function">CompileCustomOutputs</span><span class="token punctuation">(</span>CustomOutputExpressions<span class="token punctuation">,</span> SeenCustomOutputExpressionsClasses<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">至此完成了PixelShader的编译。</p></div></div></div><div class="heading-wrapper"><h5 data-heading="收集用到的UV数" dir="auto" class="heading" id="收集用到的UV数"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>收集用到的UV数<div class="heading-after">...</div></h5><div class="heading-children"><div><p dir="auto">会调用<em>FHLSLMaterialTranslator::GetNumUserTexCoords()</em>收集使用到的TexCoord的套数，这里的TexCoord指的是Vertex To Pixel的结构体所使用到的TexCoord套数——很多需要在Vertex Shader读取，插值后传到Pixel Shader的数据都要存在TexCoord里。</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded"><span class="token keyword">for</span> <span class="token punctuation">(</span>uint32 CustomUVIndex <span class="token operator">=</span> MP_CustomizedUVs0<span class="token punctuation">;</span> CustomUVIndex <span class="token operator">&lt;=</span> MP_CustomizedUVs7<span class="token punctuation">;</span> CustomUVIndex<span class="token operator">++</span><span class="token punctuation">)</span>  
<span class="token punctuation">{</span>  
    <span class="token comment">// Only compile custom UV inputs for UV channels requested by the pixel shader inputs  </span>
    <span class="token comment">// Any unconnected inputs will have a texcoord generated for them in Material-&gt;CompileProperty, which will pass through the vertex (uncustomized) texture coordinates    // Note: this is using NumUserTexCoords, which is set by translating all the pixel properties above    if (CustomUVIndex - MP_CustomizedUVs0 &lt; SavedNumUserTexCoords)  </span>
    <span class="token punctuation">{</span>       Chunk<span class="token punctuation">[</span>CustomUVIndex<span class="token punctuation">]</span> <span class="token operator">=</span> Material<span class="token operator">-&gt;</span><span class="token function">CompilePropertyAndSetMaterialProperty</span><span class="token punctuation">(</span><span class="token punctuation">(</span>EMaterialProperty<span class="token punctuation">)</span>CustomUVIndex<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">而<em>FHLSLMaterialTranslator::GetNumUserVertexTexCoords()</em>会收集Vertex Shader用到的模型输入的TexCoord套数。</p></div></div></div><div class="heading-wrapper"><h5 data-heading="编译CustomExpression实现" dir="auto" class="heading" id="编译CustomExpression实现"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>编译CustomExpression实现<div class="heading-after">...</div></h5><div class="heading-children"><div><p dir="auto">在调用之前先实现自定义的Expression，应该是包含了Custom Node以及一些常用函数。</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded"><span class="token comment">// Output the implementation for any custom expressions we will call below.  </span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>int32 ExpressionIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> ExpressionIndex <span class="token operator">&lt;</span> CustomExpressions<span class="token punctuation">.</span><span class="token function">Num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> ExpressionIndex<span class="token operator">++</span><span class="token punctuation">)</span>  
<span class="token punctuation">{</span>  
    ResourcesString <span class="token operator">+=</span> CustomExpressions<span class="token punctuation">[</span>ExpressionIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>Implementation <span class="token operator">+</span> <span class="token string">"\r\n\r\n"</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">至此代码片段的生成已经结束。</p></div></div></div><div class="heading-wrapper"><h5 data-heading="检查错误" dir="auto" class="heading" id="检查错误"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>检查错误<div class="heading-after">...</div></h5><div class="heading-children"><div><p dir="auto">然后会进行一堆诸如"Dynamically lit translucency is not supported for BLEND_Modulate materials."、"Only transparent or postprocess materials can read from scene depth."之类的检查。</p></div></div></div><div class="heading-wrapper"><h5 data-heading="顶点插值" dir="auto" class="heading" id="顶点插值"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>顶点插值<div class="heading-after">...</div></h5><div class="heading-children"><div><p dir="auto">顶点上的属性都可以用<em>VertexInterpolator</em>节点插值，然后在PixelShader中进行读取，例如说我们想在PixelShader中使用PerInstance Custom Data，那么需要将其连到<em>VertexInterpolator</em>节点后进行使用。因此UE4首先会将当前材质以及当前材质引用到的材质函数中使用到<em>VertexInterpolator</em>的节点先进行计算和插值。 编译器使用如下代码生成代码并检查是否超过插值数量的最大限制。下面的代码限制了所有V2P的参数大小不能超过8(套Texcoord)×2(每套TexCoord有两个Scalar元素)。</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded">FString InterpolatorsOffsetsDefinitionCode<span class="token punctuation">;</span>  
TBitArray<span class="token operator">&lt;</span><span class="token operator">&gt;</span> FinalAllocatedCoords <span class="token operator">=</span> <span class="token function">GetVertexInterpolatorsOffsets</span><span class="token punctuation">(</span>InterpolatorsOffsetsDefinitionCode<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
<span class="token comment">// Finished compilation, verify final interpolator count restrictions  </span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>CurrentCustomVertexInterpolatorOffset <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>  
<span class="token punctuation">{</span>  
    <span class="token keyword">const</span> int32 MaxNumScalars <span class="token operator">=</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>  
    <span class="token keyword">const</span> int32 TotalUsedScalars <span class="token operator">=</span> FinalAllocatedCoords<span class="token punctuation">.</span><span class="token function">FindLast</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>  
  
       <span class="token keyword">if</span> <span class="token punctuation">(</span>TotalUsedScalars <span class="token operator">&gt;</span> MaxNumScalars<span class="token punctuation">)</span>  
    <span class="token punctuation">{</span>       <span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"Maximum number of custom vertex interpolators exceeded. (%i / %i scalar values) (TexCoord: %i scalars, Custom: %i scalars)"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  
          TotalUsedScalars<span class="token punctuation">,</span> MaxNumScalars<span class="token punctuation">,</span> <span class="token function">GetNumUserTexCoords</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span> CurrentCustomVertexInterpolatorOffset<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">其中<em>FHLSLMaterialTranslator::GetVertexInterpolatorsOffsets()</em>传入一个字符串引用，用于写入生成的HLSL代码。 生成HLSL代码部分的代码如下：</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded"><span class="token keyword">for</span> <span class="token punctuation">(</span>UMaterialExpressionVertexInterpolator<span class="token operator">*</span> Interpolator <span class="token operator">:</span> SortedInterpolators<span class="token punctuation">)</span>  
<span class="token punctuation">{</span>  
    int32 Index <span class="token operator">=</span> Interpolator<span class="token operator">-&gt;</span>InterpolatorIndex<span class="token punctuation">;</span>  
  
    <span class="token keyword">const</span> EMaterialValueType Type <span class="token operator">=</span> Interpolator<span class="token operator">-&gt;</span>InterpolatedType <span class="token operator">==</span> MCT_Float <span class="token operator">?</span> MCT_Float1 <span class="token operator">:</span> Interpolator<span class="token operator">-&gt;</span>InterpolatedType<span class="token punctuation">;</span>  
  
    VertexInterpolatorsOffsetsDefinitionCode <span class="token operator">+=</span> LINE_TERMINATOR<span class="token punctuation">;</span>  
    VertexInterpolatorsOffsetsDefinitionCode <span class="token operator">+=</span> <span class="token class-name">FString</span><span class="token double-colon punctuation">::</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"#define VERTEX_INTERPOLATOR_%i_TEXCOORDS_X\t%i"</span><span class="token punctuation">)</span> LINE_TERMINATOR<span class="token punctuation">,</span> Index<span class="token punctuation">,</span> <span class="token function">GetNextUVSlot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Type <span class="token operator">&gt;=</span> MCT_Float2<span class="token punctuation">)</span>  
    <span class="token punctuation">{</span>       VertexInterpolatorsOffsetsDefinitionCode <span class="token operator">+=</span> <span class="token class-name">FString</span><span class="token double-colon punctuation">::</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"#define VERTEX_INTERPOLATOR_%i_TEXCOORDS_Y\t%i"</span><span class="token punctuation">)</span> LINE_TERMINATOR<span class="token punctuation">,</span> Index<span class="token punctuation">,</span> <span class="token function">GetNextUVSlot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
       <span class="token keyword">if</span> <span class="token punctuation">(</span>Type <span class="token operator">&gt;=</span> MCT_Float3<span class="token punctuation">)</span>  
       <span class="token punctuation">{</span>          VertexInterpolatorsOffsetsDefinitionCode <span class="token operator">+=</span> <span class="token class-name">FString</span><span class="token double-colon punctuation">::</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"#define VERTEX_INTERPOLATOR_%i_TEXCOORDS_Z\t%i"</span><span class="token punctuation">)</span> LINE_TERMINATOR<span class="token punctuation">,</span> Index<span class="token punctuation">,</span> <span class="token function">GetNextUVSlot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
          <span class="token keyword">if</span> <span class="token punctuation">(</span>Type <span class="token operator">==</span> MCT_Float4<span class="token punctuation">)</span>  
          <span class="token punctuation">{</span>             VertexInterpolatorsOffsetsDefinitionCode <span class="token operator">+=</span> <span class="token class-name">FString</span><span class="token double-colon punctuation">::</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"#define VERTEX_INTERPOLATOR_%i_TEXCOORDS_W\t%i"</span><span class="token punctuation">)</span> LINE_TERMINATOR<span class="token punctuation">,</span> Index<span class="token punctuation">,</span> <span class="token function">GetNextUVSlot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
          <span class="token punctuation">}</span>       <span class="token punctuation">}</span>    <span class="token punctuation">}</span>       VertexInterpolatorsOffsetsDefinitionCode <span class="token operator">+=</span> LINE_TERMINATOR<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">写法还挺有趣。</p></div></div></div><div class="heading-wrapper"><h5 data-heading="“拼接”代码" dir="auto" class="heading" id="“拼接”代码"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>“拼接”代码<div class="heading-after">...</div></h5><div class="heading-children"><div><p dir="auto">前面生成了各种各样的“代码片段(Code Chunk)”，接下来要将其按照一定顺序拼接起来。 拼接代码主要使用<em>FHLSLMaterialTranslator::GetFixedParameterCode()</em>函数。<em>FHLSLMaterialTranslator::GetFixedParameterCode()</em>会根据传进来的对应的代码索引和索引范围，输出实际的HLSL代码。</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded"><span class="token keyword">void</span> <span class="token class-name">FHLSLMaterialTranslator</span><span class="token double-colon punctuation">::</span><span class="token function">GetFixedParameterCode</span><span class="token punctuation">(</span>int32 StartChunk<span class="token punctuation">,</span> int32 EndChunk<span class="token punctuation">,</span> int32 ResultIndex<span class="token punctuation">,</span> TArray<span class="token operator">&lt;</span>FShaderCodeChunk<span class="token operator">&gt;</span><span class="token operator">&amp;</span> CodeChunks<span class="token punctuation">,</span> FString<span class="token operator">&amp;</span> OutDefinitions<span class="token punctuation">,</span> FString<span class="token operator">&amp;</span> OutValue<span class="token punctuation">)</span>  
<span class="token punctuation">{</span>  
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ResultIndex <span class="token operator">!=</span> INDEX_NONE<span class="token punctuation">)</span>  
    <span class="token punctuation">{</span>       <span class="token function">checkf</span><span class="token punctuation">(</span>ResultIndex <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> ResultIndex <span class="token operator">&lt;</span> CodeChunks<span class="token punctuation">.</span><span class="token function">Num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"Index out of range %d/%d [%s]"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ResultIndex<span class="token punctuation">,</span> CodeChunks<span class="token punctuation">.</span><span class="token function">Num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">*</span>Material<span class="token operator">-&gt;</span><span class="token function">GetFriendlyName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
       <span class="token function">check</span><span class="token punctuation">(</span><span class="token operator">!</span>CodeChunks<span class="token punctuation">[</span>ResultIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>UniformExpression <span class="token operator">||</span> CodeChunks<span class="token punctuation">[</span>ResultIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>UniformExpression<span class="token operator">-&gt;</span><span class="token function">IsConstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
       <span class="token keyword">if</span> <span class="token punctuation">(</span>CodeChunks<span class="token punctuation">[</span>ResultIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>UniformExpression <span class="token operator">&amp;&amp;</span> CodeChunks<span class="token punctuation">[</span>ResultIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>UniformExpression<span class="token operator">-&gt;</span><span class="token function">IsConstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  
       <span class="token punctuation">{</span>          <span class="token comment">// Handle a constant uniform expression being the only code chunk hooked up to a material input  </span>
          <span class="token keyword">const</span> FShaderCodeChunk<span class="token operator">&amp;</span> ResultChunk <span class="token operator">=</span> CodeChunks<span class="token punctuation">[</span>ResultIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>  
          OutValue <span class="token operator">=</span> ResultChunk<span class="token punctuation">.</span>Definition<span class="token punctuation">;</span>  
       <span class="token punctuation">}</span>       <span class="token keyword">else</span>  
       <span class="token punctuation">{</span>  
          <span class="token keyword">const</span> FShaderCodeChunk<span class="token operator">&amp;</span> ResultChunk <span class="token operator">=</span> CodeChunks<span class="token punctuation">[</span>ResultIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>  
          <span class="token comment">// Combine the definition lines and the return statement  </span>
          <span class="token function">check</span><span class="token punctuation">(</span>ResultChunk<span class="token punctuation">.</span>bInline <span class="token operator">||</span> ResultChunk<span class="token punctuation">.</span>SymbolName<span class="token punctuation">.</span><span class="token function">Len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
          OutDefinitions <span class="token operator">=</span> <span class="token function">GetDefinitions</span><span class="token punctuation">(</span>CodeChunks<span class="token punctuation">,</span> StartChunk<span class="token punctuation">,</span> EndChunk<span class="token punctuation">)</span><span class="token punctuation">;</span>  
          OutValue <span class="token operator">=</span> ResultChunk<span class="token punctuation">.</span>bInline <span class="token operator">?</span> ResultChunk<span class="token punctuation">.</span>Definition <span class="token operator">:</span> ResultChunk<span class="token punctuation">.</span>SymbolName<span class="token punctuation">;</span>  
       <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">else</span>  
    <span class="token punctuation">{</span>  
       OutValue <span class="token operator">=</span> <span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">具体来说，如果输入的代码索引对应的代码是常量表达式，盲猜是例如Normal=float3(0, 0, 0)，那么就直接返回这个常量表达式。 否则就说明其包含了多个计算步骤，那么就会使用<em>GetDefinitions(CodeChunks, StartChunk, EndChunk);</em>逐个写入每个代码片段。</p></div><div class="heading-wrapper"><h6 data-heading="法线" dir="auto" class="heading" id="法线"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>法线<div class="heading-after">...</div></h6><div class="heading-children"><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded"><span class="token function">GetFixedParameterCode</span><span class="token punctuation">(</span>  
    <span class="token number">0</span><span class="token punctuation">,</span>  
    NormalCodeChunkEnd<span class="token punctuation">,</span>    Chunk<span class="token punctuation">[</span>MP_Normal<span class="token punctuation">]</span><span class="token punctuation">,</span>  
    SharedPropertyCodeChunks<span class="token punctuation">[</span>NormalShaderFrequency<span class="token punctuation">]</span><span class="token punctuation">,</span>  
    TranslatedCodeChunkDefinitions<span class="token punctuation">[</span>MP_Normal<span class="token punctuation">]</span><span class="token punctuation">,</span>  
    TranslatedCodeChunks<span class="token punctuation">[</span>MP_Normal<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
<span class="token comment">// Always gather MP_Normal definitions as they can be shared by other properties  </span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>TranslatedCodeChunkDefinitions<span class="token punctuation">[</span>MP_Normal<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">IsEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  
<span class="token punctuation">{</span>  
    TranslatedCodeChunkDefinitions<span class="token punctuation">[</span>MP_Normal<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">GetDefinitions</span><span class="token punctuation">(</span>SharedPropertyCodeChunks<span class="token punctuation">[</span>NormalShaderFrequency<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> NormalCodeChunkEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code><button class="copy-code-button">复制</button></pre></div></div></div><div class="heading-wrapper"><h6 data-heading="其他属性" dir="auto" class="heading" id="其他属性"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>其他属性<div class="heading-after">...</div></h6><div class="heading-children"><div><p dir="auto">其他属性就直接for循环遍历插入了。</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded"><span class="token comment">// Now the rest, skipping Normal  </span>
<span class="token keyword">for</span><span class="token punctuation">(</span>uint32 PropertyId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> PropertyId <span class="token operator">&lt;</span> MP_MAX<span class="token punctuation">;</span> <span class="token operator">++</span>PropertyId<span class="token punctuation">)</span>  
<span class="token punctuation">{</span>  
    <span class="token keyword">if</span> <span class="token punctuation">(</span>PropertyId <span class="token operator">==</span> MP_MaterialAttributes <span class="token operator">||</span> PropertyId <span class="token operator">==</span> MP_Normal <span class="token operator">||</span> PropertyId <span class="token operator">==</span> MP_CustomOutput<span class="token punctuation">)</span>  
    <span class="token punctuation">{</span>       <span class="token keyword">continue</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
    <span class="token keyword">const</span> EShaderFrequency PropertyShaderFrequency <span class="token operator">=</span> <span class="token class-name">FMaterialAttributeDefinitionMap</span><span class="token double-colon punctuation">::</span><span class="token function">GetShaderFrequency</span><span class="token punctuation">(</span><span class="token punctuation">(</span>EMaterialProperty<span class="token punctuation">)</span>PropertyId<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    int32 StartChunk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  
    <span class="token keyword">if</span> <span class="token punctuation">(</span>PropertyShaderFrequency <span class="token operator">==</span> NormalShaderFrequency <span class="token operator">&amp;&amp;</span> SharedPixelProperties<span class="token punctuation">[</span>PropertyId<span class="token punctuation">]</span><span class="token punctuation">)</span>  
    <span class="token punctuation">{</span>       <span class="token comment">// When processing shared properties, do not generate the code before the Normal was generated as those are already handled  </span>
       StartChunk <span class="token operator">=</span> NormalCodeChunkEnd<span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
    <span class="token function">GetFixedParameterCode</span><span class="token punctuation">(</span>  
       StartChunk<span class="token punctuation">,</span>       SharedPropertyCodeChunks<span class="token punctuation">[</span>PropertyShaderFrequency<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  
       Chunk<span class="token punctuation">[</span>PropertyId<span class="token punctuation">]</span><span class="token punctuation">,</span>       SharedPropertyCodeChunks<span class="token punctuation">[</span>PropertyShaderFrequency<span class="token punctuation">]</span><span class="token punctuation">,</span>  
       TranslatedCodeChunkDefinitions<span class="token punctuation">[</span>PropertyId<span class="token punctuation">]</span><span class="token punctuation">,</span>  
       TranslatedCodeChunks<span class="token punctuation">[</span>PropertyId<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">其他还进行了一些感觉很无聊的操作不想看。</p></div></div></div></div></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="生成HLSL代码" dir="auto" class="heading" id="生成HLSL代码"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>生成HLSL代码<div class="heading-after">...</div></h3><div class="heading-children"><div><p dir="auto">上述过程实际上只收集了生成代码所需的必要信息，而实际的代码生成是在<em>FHLSLMaterialTranslator::GetMaterialShaderCode()</em>。 实际上HLSL代码是基于一个代码模板来生成的，模板在<em>/Engine/Shaders/Private/MaterialTemplate.ush</em>。模板里面有复数个<em>"%s"</em>。</p></div><div class="heading-wrapper"><h4 data-heading="TexCoord数量" dir="auto" class="heading" id="TexCoord数量"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>TexCoord数量<div class="heading-after">...</div></h4><div class="heading-children"><div><p dir="auto">Shader中需要显示声明VertexShader和PixelShader使用到的TexCoord数。另外还声明了VertexInterpolator的数量。VertexInterpolator的数据是保存在，传递到PixelShader的<em>FMaterialPixelParameters</em>结构体内的。</p></div><div><pre dir="auto" class="language-cpp" tabindex="0"><code class="language-cpp is-loaded"><span class="token keyword">const</span> uint32 NumUserVertexTexCoords <span class="token operator">=</span> <span class="token function">GetNumUserVertexTexCoords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">const</span> uint32 NumUserTexCoords <span class="token operator">=</span> <span class="token function">GetNumUserTexCoords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">const</span> uint32 NumCustomVectors <span class="token operator">=</span> <span class="token class-name">FMath</span><span class="token double-colon punctuation">::</span><span class="token function">DivideAndRoundUp</span><span class="token punctuation">(</span><span class="token punctuation">(</span>uint32<span class="token punctuation">)</span>CurrentCustomVertexInterpolatorOffset<span class="token punctuation">,</span> <span class="token number">2u</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">const</span> uint32 NumTexCoordVectors <span class="token operator">=</span> FinalAllocatedCoords<span class="token punctuation">.</span><span class="token function">FindLast</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>  
  
LazyPrintf<span class="token punctuation">.</span><span class="token function">PushParam</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token class-name">FString</span><span class="token double-colon punctuation">::</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"%u"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>NumUserVertexTexCoords<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
LazyPrintf<span class="token punctuation">.</span><span class="token function">PushParam</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token class-name">FString</span><span class="token double-colon punctuation">::</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"%u"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>NumUserTexCoords<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
LazyPrintf<span class="token punctuation">.</span><span class="token function">PushParam</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token class-name">FString</span><span class="token double-colon punctuation">::</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"%u"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>NumCustomVectors<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
LazyPrintf<span class="token punctuation">.</span><span class="token function">PushParam</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token class-name">FString</span><span class="token double-colon punctuation">::</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"%u"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>NumTexCoordVectors<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

LazyPrintf<span class="token punctuation">.</span><span class="token function">PushParam</span><span class="token punctuation">(</span><span class="token operator">*</span>VertexInterpolatorsOffsetsDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button">复制</button></pre></div></div></div><div class="heading-wrapper"><h4 data-heading="FMaterialAttributes" dir="auto" class="heading" id="FMaterialAttributes"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>FMaterialAttributes<div class="heading-after">...</div></h4><div class="heading-children"><div><p dir="auto">FMaterialAttributes结构体。但是目前没发现在哪里用到过这个结构体。</p></div></div></div><div class="heading-wrapper"><h4 data-heading="FPixelMaterialInputs" dir="auto" class="heading" id="FPixelMaterialInputs"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>FPixelMaterialInputs<div class="heading-after">...</div></h4><div class="heading-children"><div><p dir="auto">接下来生成<em>FPixelMaterialInputs</em>结构体的成员。使用<em>GetSharedInputsMaterialCode</em>函数生成代码。 <em>FPixelMaterialInputs</em>结构体是PixelShader的输入(输出)参数，</p></div></div></div><div class="heading-wrapper"><h4 data-heading="" dir="auto" class="heading"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div><div class="heading-after">...</div></h4><div class="heading-children"><div class="mod-footer"></div></div></div></div></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-gutter"><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-container"><div class="sidebar-sizer"><div class="sidebar-content-positioner"><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder"><div class="graph-view-container"><div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div><canvas id="graph-canvas" width="512px" height="512px"></canvas></div></div></div><div class="tree-container outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button is-collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area"><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#材质编译"><span class="tree-item-title"><p dir="auto">材质编译</p></span></a></div><div class="tree-item-children"><div class="tree-item mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#材质节点编译全流程"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p dir="auto">材质节点编译全流程</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#表达式输入-->Operand"><span class="tree-item-title"><p dir="auto">表达式输入--&gt;Operand</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#表达式-->Operator"><span class="tree-item-title"><p dir="auto">表达式--&gt;Operator</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#编译器-->Compiler"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p dir="auto">编译器--&gt;Compiler</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#插入代码片段_AddCodeChunk"><span class="tree-item-title"><p dir="auto">插入代码片段 AddCodeChunk</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#编译上游表达式_CallExpression"><span class="tree-item-title"><p dir="auto">编译上游表达式 CallExpression</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#编译流程"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p dir="auto">编译流程</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#CustomOutputs"><span class="tree-item-title"><p dir="auto">CustomOutputs</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#编译法线"><span class="tree-item-title"><p dir="auto">编译法线</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#编译其他材质属性"><span class="tree-item-title"><p dir="auto">编译其他材质属性</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#编译CustomOutputs"><span class="tree-item-title"><p dir="auto">编译CustomOutputs</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#收集用到的UV数"><span class="tree-item-title"><p dir="auto">收集用到的UV数</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#编译CustomExpression实现"><span class="tree-item-title"><p dir="auto">编译CustomExpression实现</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#检查错误"><span class="tree-item-title"><p dir="auto">检查错误</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#顶点插值"><span class="tree-item-title"><p dir="auto">顶点插值</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#“拼接”代码"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p dir="auto">“拼接”代码</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item" data-depth="6"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#法线"><span class="tree-item-title"><p dir="auto">法线</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="6"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#其他属性"><span class="tree-item-title"><p dir="auto">其他属性</p></span></a></div><div class="tree-item-children"></div></div></div></div></div></div></div></div><div class="tree-item mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#生成HLSL代码"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p dir="auto">生成HLSL代码</p></span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#TexCoord数量"><span class="tree-item-title"><p dir="auto">TexCoord数量</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#FMaterialAttributes"><span class="tree-item-title"><p dir="auto">FMaterialAttributes</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#FPixelMaterialInputs"><span class="tree-item-title"><p dir="auto">FPixelMaterialInputs</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#"><span class="tree-item-title"></span></a></div><div class="tree-item-children"></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>